(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,48227,e=>{"use strict";e.s(["default",()=>i],48227);var t=e.i(83770);let r=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},s=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,t.forwardRef)((e,r)=>{let{color:o="currentColor",size:i=24,strokeWidth:a=2,absoluteStrokeWidth:l,className:c="",children:u,iconNode:d,...g}=e;return(0,t.createElement)("svg",{ref:r,...n,width:i,height:i,stroke:o,strokeWidth:l?24*Number(a)/Number(i):a,className:s("lucide",c),...!u&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(g)&&{"aria-hidden":"true"},...g},[...d.map(e=>{let[r,s]=e;return(0,t.createElement)(r,s)}),...Array.isArray(u)?u:[u]])}),i=(e,n)=>{let i=(0,t.forwardRef)((i,a)=>{let{className:l,...c}=i;return(0,t.createElement)(o,{ref:a,iconNode:n,className:s("lucide-".concat(r(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),l),...c})});return i.displayName=r(e),i}},47350,34342,e=>{"use strict";e.s(["XCircle",()=>t],47350);let t=(0,e.i(48227).default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);e.s(["ensureAuthenticatedUserExists",()=>n,"getQuestions",()=>s,"seedSampleQuestions",()=>i],34342);var r=e.i(55499);async function s(){let{data:e,error:t}=await r.supabase.from("gq_questions").select("*").order("created_at",{ascending:!1});if(t)throw t;return e||[]}async function n(e,t,s){let{data:n,error:o}=await r.supabase.from("users").select("*").eq("id",e).single();if(n&&!o)return n;let{data:i,error:a}=await r.supabase.from("users").insert({id:e,email:t,name:s||t.split("@")[0],role:"student"}).select().single();if(a){if("23505"===a.code){let{data:t}=await r.supabase.from("users").select("*").eq("id",e).single();if(t)return t}throw a}return i}let o=[{code:"TRIANGLE_001",title:"Konstrukce rovnoramenného trojúhelníku",prompt_md:"\n# Konstrukce rovnoramenného trojúhelníku\n\nSestrojte rovnoramenný trojúhelník ABC tak, aby:\n- Bod C je vrchol trojúhelníku\n- Bod S je střed ramene\n- Základna AB leží na přímce q\n\n## Postup:\n1. Označte body A a B na přímce q\n2. Sestrojte úsečky AC a BC\n3. Ověřte, že AC = BC\n    ",max_score:3,givens:{points:{S:{x:5,y:5},C:{x:4.5,y:3}},lines:{q:{p1:{x:0,y:7},p2:{x:10,y:7}}}},constraints:{requiredPoints:2,requiredSegments:3,minScore:2},difficulty:2,tags:["trojúhelník","rovnoramenný","konstrukce"]},{code:"CIRCLE_001",title:"Konstrukce kružnice procházející třemi body",prompt_md:"\n# Konstrukce kružnice procházející třemi body\n\nSestrojte kružnici, která prochází body A, B a C.\n\n## Postup:\n1. Sestrojte osy úseček AB a BC\n2. Najděte průsečík os - střed kružnice\n3. Sestrojte kružnici se středem v průsečíku os\n    ",max_score:4,givens:{points:{A:{x:2,y:6},B:{x:6,y:6},C:{x:4,y:3}}},constraints:{requiredPoints:1,requiredLines:2,requiredCircles:1,minScore:3},difficulty:3,tags:["kružnice","tři body","osy úseček"]},{code:"ANGLE_001",title:"Konstrukce úhlu",prompt_md:"\n# Konstrukce úhlu\n\nSestrojte úhel o velikosti 60° s vrcholem v bodě A a jedním ramenem na přímce p.\n\n## Postup:\n1. Označte bod B na přímce p\n2. Sestrojte kružnici se středem A a poloměrem AB\n3. Sestrojte druhé rameno úhlu\n    ",max_score:3,givens:{points:{A:{x:3,y:4}},lines:{p:{p1:{x:0,y:4},p2:{x:8,y:4}}}},constraints:{requiredPoints:1,requiredLines:1,requiredCircles:1,minScore:2},difficulty:2,tags:["úhel","60°","konstrukce"]}];async function i(){try{if((await s()).length>0)return void console.log("Questions already exist, skipping seed");let{error:e}=await r.supabase.from("gq_questions").insert(o);if(e)throw e;console.log("Sample questions seeded successfully")}catch(e){throw console.error("Error seeding questions:",e),e}}},44665,e=>{"use strict";e.s(["default",()=>w]);var t=e.i(57421),r=e.i(83770),s=e.i(39324),n=e.i(89723),o=e.i(38494),i=e.i(65821),a=e.i(18962),l=e.i(19722),c=e.i(53039),u=e.i(89124),d=e.i(690),g=e.i(88387),p=e.i(90229),m=e.i(47350),h=e.i(29235),b=e.i(76540),f=e.i(91604),x=e.i(56162),y=e.i(39560),v=e.i(79562),j=e.i(55499),k=e.i(34342);function C(e){return{x:e.X(),y:e.Y()}}function w(e){var w,S;let{questionId:N,studentId:q="anonymous",onBack:_}=e,A=(0,r.useRef)(null),O=(0,r.useRef)(null),[z,B]=(0,r.useState)("mouse"),[E,P]=(0,r.useState)([]),[U,L]=(0,r.useState)(""),[T,K]=(0,r.useState)(null),[R,I]=(0,r.useState)([]),[M,W]=(0,r.useState)(null),[Z,D]=(0,r.useState)(null),[J,F]=(0,r.useState)(null),[G,Q]=(0,r.useState)(!0),[X,V]=(0,r.useState)(null),[$,Y]=(0,r.useState)(0),[H,ee]=(0,r.useState)(null),[et,er]=(0,r.useState)(!1),[es,en]=(0,r.useState)(!1),[eo,ei]=(0,r.useState)(!1),[ea,el]=(0,r.useState)({x:5,y:4,rotation:0,length:6}),[ec,eu]=(0,r.useState)({x:7,y:4,rotation:0,size:3}),[ed,eg]=(0,r.useState)({x:6,y:3,rotation:0,size:3}),[ep,em]=(0,r.useState)(null),[eh,eb]=(0,r.useState)(!1),ef=(0,r.useRef)(z),ex=(0,r.useRef)(E),ey=(0,r.useRef)(eh),ev=(0,r.useRef)(null),ej=(0,r.useRef)(null);function ek(e){(null==e?void 0:e.id)&&I(t=>[...t,e.id])}function eC(e,t){return e.getAllObjectsUnderMouse(t).find(e=>"point"===e.elType&&!e.visProp.fixed)||null}(0,r.useEffect)(()=>{ef.current=z},[z]),(0,r.useEffect)(()=>{ex.current=E},[E]),(0,r.useEffect)(()=>{ey.current=eh},[eh]),(0,r.useEffect)(()=>{if(!H)return;let e=setInterval(()=>{Y(Math.floor((Date.now()-H.getTime())/1e3))},1e3);return()=>clearInterval(e)},[H]),(0,r.useEffect)(()=>{let e=async()=>{try{if(Q(!0),V(null),console.debug("loadQuestion id=",N,"studentId=",q),j.supabase){let e=await j.supabase.from("gq_questions").select("*").eq("id",N).single();if(console.debug("gq_questions response",e),e.error)throw console.error("gq_questions error detailed",JSON.stringify(e.error,Object.getOwnPropertyNames(e.error))),e.error;if(!e.data)throw Error("Question not found");console.debug("Question loaded successfully:",e.data),W(e.data)}else{let e={id:N||"mock-question",code:"Q9",title:"Úloha 9: rovnoramenný ABC (C vrchol, AB na q, S střed ramene)",prompt_md:"V rovině leží body **C**, **S** a přímka **q**. Najděte vrcholy **A**, **B** rovnoramenného trojúhelníku **ABC** tak, že **C** je vrchol, **AB** leží na **q** a **S** je střed **jednoho** ramene.",max_score:3,givens:{lines:{q:{p1:{x:0,y:7},p2:{x:10,y:7}}},points:{C:{x:4.5,y:3},S:{x:5,y:5}},tolerance:.06},constraints:[{id:"A_on_q",line:"q",type:"point_on_line",point:"A"},{id:"B_on_q",line:"q",type:"point_on_line",point:"B"},{a:"A",b:"C",c:"B",d:"C",id:"iso",type:"distance_equal"},{id:"S_mid",type:"any_of",children:[{a:"A",b:"C",type:"midpoint_of",midpoint:"S"},{a:"B",b:"C",type:"midpoint_of",midpoint:"S"}]}],difficulty:3,tags:["triangle","isosceles","construction","geometry"]};console.debug("Using mock question (Supabase not available):",e),W(e)}let r=q,{data:{user:s}}=j.supabase?await j.supabase.auth.getUser():{data:{user:null}};if(s)try{var e,t;r=(await (0,k.ensureAuthenticatedUserExists)(s.id,s.email||"",(null==(e=s.user_metadata)?void 0:e.name)||(null==(t=s.email)?void 0:t.split("@")[0]))).id,console.debug("Using authenticated user:",s.email,"ID:",r)}catch(e){throw console.error("Error ensuring authenticated user exists:",e),Error("Failed to create user record for authenticated user")}else if("anonymous"===q)throw Error("Anonymous users are not supported. Please log in to continue.");else r=q,console.debug("Using provided studentId:",r);if(!r||"string"==typeof r&&!/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/.test(r))throw console.error("Invalid userId before creating session:",r),Error("Invalid userId for session creation");if(j.supabase){let e=await j.supabase.from("sessions").insert({user_id:r,question_id:N,session_data:{},is_active:!0}).select().single();if(console.debug("sessions insert response",e),e.error)throw console.error("sessions insert error",JSON.stringify(e.error,Object.getOwnPropertyNames(e.error))),e.error;D(e.data);let t=await j.supabase.from("gq_attempts").insert({question_id:N,session_id:e.data.id,state:{},student_id:r,is_complete:!1,time_spent:0}).select().single();if(console.debug("gq_attempts insert response",t),t.error)throw console.error("gq_attempts insert error",JSON.stringify(t.error,Object.getOwnPropertyNames(t.error))),t.error;F(t.data)}else{let e={id:"mock-session-"+Date.now(),user_id:r,question_id:N||"mock-question",session_data:{},is_active:!0},t={id:"mock-attempt-"+Date.now(),question_id:N||"mock-question",session_id:e.id,state:{},student_id:r,is_complete:!1,time_spent:0};console.debug("Using mock session and attempt (Supabase not available)"),D(e),F(t)}ee(new Date)}catch(e){try{console.error("Error loading question (detailed):",e&&"object"==typeof e?JSON.stringify(e,Object.getOwnPropertyNames(e)):e)}catch(t){console.error("Error logging err",t),console.error("Original err:",e)}V(e instanceof Error?e.message:"Failed to load question")}finally{Q(!1)}};N&&e()},[N,q]);let ew=(0,r.useCallback)((e,t)=>{if(!(null==M?void 0:M.givens)){let r=e.create("point",[t.x,t.y],{name:"",size:2,strokeColor:"#444",fillColor:"#666"});return ek(r),r}let r=ej.current;if(r){for(let[s,n]of Object.entries(r))if(n&&"object"==typeof n&&"elType"in n&&"line"===n.elType&&function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.03,s=C(t.point1),n=C(t.point2),o=n.y-s.y,i=s.x-n.x,a=-(o*s.x+i*s.y);return Math.abs(o*e.x+i*e.y+a)/Math.hypot(o,i)<r}(t,n,.15)){let r=String.fromCharCode(65+Object.values(e.objects).filter(e=>"point"===e.elType).map(e=>e.name).length),s=e.create("glider",[t.x,t.y,n],{name:r,size:3,strokeColor:"#e11d48",fillColor:"#e11d48",label:{offset:[5,10]}});return ek(s),s}}let s=e.create("point",[t.x,t.y],{name:"",size:2,strokeColor:"#444",fillColor:"#666"});return ek(s),s},[M]),eS=(0,r.useCallback)((e,t)=>{var r;if(ey.current)return;let s=null==(r=t.originalEvent)?void 0:r.target;if(s&&(s.closest(".group")||s.classList.contains("group")))return;let n=function(e,t){let r=e.getUsrCoordsOfMouse(t);return{x:r[0],y:r[1]}}(e,t);switch(ef.current){case"mouse":L("");break;case"point":ew(e,n),L("Bod vytvořen");break;case"segment":{let r=eC(e,t);r||(r=ew(e,n)),P(t=>{let s=[...t,r];if(1===s.length)L("Klikněte na druhý bod");else if(2===s.length)return ek(e.create("segment",[s[0],s[1]],{strokeColor:"#2563eb",strokeWidth:2})),L("Úsečka vytvořena"),[];return s});break}case"line":{let r=eC(e,t);r||(r=ew(e,n)),P(t=>{let s=[...t,r];if(1===s.length)L("Klikněte na druhý bod");else if(2===s.length)return ek(e.create("line",[s[0],s[1]],{strokeColor:"#059669",strokeWidth:1,dash:1})),L("Přímka vytvořena"),[];return s});break}case"circle":{let r=eC(e,t);r||(r=ew(e,n)),P(t=>{let s=[...t,r];if(1===s.length)L("Klikněte na bod na kružnici");else if(2===s.length)return ek(e.create("circle",[s[0],s[1]],{strokeColor:"#dc2626",strokeWidth:2})),L("Kružnice vytvořena"),[];return s});break}case"rubber":{let r=e.getAllObjectsUnderMouse(t).find(e=>{var t;return!(null==(t=e.visProp)?void 0:t.fixed)});r&&(e.removeObject(r),L("Objekt smazán"))}}},[ew]);async function eN(){if(!A.current||!J)return;let e=function(){if(!(null==M?void 0:M.constraints))return{passed:!0,message:"Konstrukce uložena",score:(null==M?void 0:M.max_score)||3};let e=A.current;ej.current;try{let t="string"==typeof M.constraints?JSON.parse(M.constraints):M.constraints,r=0,s=!1,n="",o=Object.values(e.objects).filter(e=>{var t;return"point"===e.elType&&!(null==(t=e.visProp)?void 0:t.fixed)}),i=Object.values(e.objects).filter(e=>"segment"===e.elType),a=Object.values(e.objects).filter(e=>{var t;return"line"===e.elType&&!(null==(t=e.visProp)?void 0:t.fixed)}),l=Object.values(e.objects).filter(e=>{var t;return"circle"===e.elType&&!(null==(t=e.visProp)?void 0:t.fixed)});return t.requiredPoints&&o.length>=t.requiredPoints&&(r+=1),t.requiredSegments&&i.length>=t.requiredSegments&&(r+=1),t.requiredLines&&a.length>=t.requiredLines&&(r+=1),t.requiredCircles&&l.length>=t.requiredCircles&&(r+=1),r>=(t.minScore||2)?(s=!0,n="✅ Výborně! Konstrukce splňuje požadavky."):n="Konstrukce neúplná. Zkuste přidat více objektů.",{passed:s,message:n,score:Math.min(r,M.max_score)}}catch(e){return{passed:!1,message:"Chyba při validaci",score:0}}}(),t={objects:Object.values(A.current.objects).map(e=>({id:e.id,type:e.elType,name:e.name,properties:e.visProp})),createdStack:R,timestamp:new Date().toISOString()};try{if(j.supabase){let{error:r}=await j.supabase.from("gq_attempts").update({state:t,score:e.score,passed:e.passed,feedback:{message:e.message,validation:e},is_complete:!0,time_spent:$}).eq("id",J.id);if(r)throw r;K({validation:e,timestamp:new Date().toISOString()}),L(e.message)}else console.log("Mock save (Supabase not available):",{validation:e,currentState:t}),K({validation:e,timestamp:new Date().toISOString()}),L(e.message)}catch(e){console.error("Error saving attempt:",e),L("Chyba při ukládání")}}return(0,r.useEffect)(()=>{ev.current=eS},[eS]),(0,r.useEffect)(()=>{if(G||X||!O.current||A.current)return;console.debug("Initializing board (post-loading), container:",O.current);let e=O.current.getBoundingClientRect(),t=Math.min(e.width/12,e.height/9),r=(e.width-12*t)/2,n=(e.height-9*t)/2,o=s.default.JSXGraph.initBoard(O.current,{boundingbox:[-1-r/t,8+n/t,11+r/t,-1-n/t],axis:!1,showNavigation:!1,showCopyright:!1,grid:!0,pan:{enabled:!1},zoom:!1,keepaspectratio:!0});return A.current=o,o.on("down",e=>{ev.current&&ev.current(o,e)}),setTimeout(()=>{try{var e,t,r;null==o||null==(t=o.renderer)||null==(e=t.resize)||e.call(t),null==o||null==(r=o.fullUpdate)||r.call(o)}catch(e){}},0),()=>{try{s.default.JSXGraph.freeBoard(o)}catch(e){}A.current=null,ej.current=null}},[G,X]),(0,r.useEffect)(()=>{if(G||X||!A.current||!M)return;console.debug("Creating givens for question:",M.title,"givens:",M.givens),ej.current&&Object.values(ej.current).forEach(e=>{if(e&&"function"==typeof e.removeObject)try{A.current.removeObject(e)}catch(e){console.warn("Error removing existing givens:",e)}});let e={};if(M.givens)try{console.debug("Parsing givens:",M.givens);let t="string"==typeof M.givens?JSON.parse(M.givens):M.givens;console.debug("Parsed givens data:",t),t.points&&(console.debug("Creating points:",t.points),Object.entries(t.points).forEach(t=>{let[r,s]=t,n=A.current.create("point",[s.x,s.y],{name:r,size:3,strokeColor:"#000",fillColor:"#000",fixed:!0,label:{offset:[5,10]}});e[r]=n,console.debug("Created point:",r,s)})),t.lines&&(console.debug("Creating lines:",t.lines),Object.entries(t.lines).forEach(t=>{let[r,s]=t,n=A.current.create("line",[[s.p1.x,s.p1.y],[s.p2.x,s.p2.y]],{strokeColor:"#000",strokeWidth:2,name:r,withLabel:!0,fixed:!0,label:{position:"rt",offset:[10,0]}});e[r]=n,console.debug("Created line:",r,s)})),t.circles&&(console.debug("Creating circles:",t.circles),Object.entries(t.circles).forEach(t=>{let[r,s]=t,n=e[s.center]||A.current.create("point",[s.center.x,s.center.y],{name:s.center,size:2,strokeColor:"#000",fillColor:"#000",fixed:!0}),o=A.current.create("circle",[n,s.radius],{strokeColor:"#000",strokeWidth:2,name:r,withLabel:!0,fixed:!0});e[r]=o,console.debug("Created circle:",r,s)}))}catch(e){console.error("Error parsing givens:",e)}else{console.debug("No givens data found, creating default givens for isosceles triangle problem");let t=A.current.create("line",[[0,7],[10,7]],{strokeColor:"#000",strokeWidth:2,name:"q",withLabel:!0,fixed:!0,label:{position:"rt",offset:[10,0]}}),r=A.current.create("point",[5,5],{name:"S",size:3,strokeColor:"#000",fillColor:"#000",fixed:!0,label:{offset:[5,10]}}),s=A.current.create("point",[4.5,3],{name:"C",size:3,strokeColor:"#000",fillColor:"#000",fixed:!0,label:{offset:[5,-15]}});e.q=t,e.S=r,e.C=s}ej.current=e,console.debug("Givens created:",e),A.current&&(A.current.renderer.resize(),A.current.fullUpdate(),console.debug("Board updated to display givens")),console.debug("Board objects after givens creation:",Object.keys(A.current.objects))},[M,G,X]),G?(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Načítání úlohy..."})]})}):X?(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(m.XCircle,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-red-600 mb-4",children:X}),_&&(0,t.jsx)("button",{onClick:_,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Zpět"})]})}):M?(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 p-6",children:(0,t.jsx)("div",{className:"max-w-6xl mx-auto",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[_&&(0,t.jsxs)("button",{onClick:_,className:"flex items-center gap-2 px-3 py-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded",children:[(0,t.jsx)(p.ArrowLeft,{size:18}),"Zpět"]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:M.title}),(0,t.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[(0,t.jsxs)("span",{children:["Kód: ",M.code]}),(0,t.jsxs)("span",{children:["Obtížnost: ","★".repeat(M.difficulty)]}),(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(h.Clock,{size:14}),Math.floor($/60),":",($%60).toString().padStart(2,"0")]})]})]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("div",{className:"text-sm text-gray-600",children:["Maximální skóre: ",M.max_score]}),J&&(0,t.jsxs)("div",{className:"text-sm text-gray-600",children:["Skóre: ",(null==T||null==(w=T.validation)?void 0:w.score)||0," / ",M.max_score]})]})]}),(0,t.jsx)("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4 mb-4",children:(0,t.jsx)("div",{className:"text-gray-700 text-sm markdown-content",children:(0,t.jsx)(b.default,{remarkPlugins:[f.default],children:null!=(S=M.prompt_md)?S:""})})}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2 mb-4 p-4 bg-gray-100 rounded-lg",children:[(0,t.jsxs)("button",{onClick:()=>B("mouse"),className:"px-3 py-2 rounded flex items-center gap-2 ".concat("mouse"===z?"bg-gray-600 text-white":"bg-white text-gray-700 hover:bg-gray-200"),children:[(0,t.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,t.jsx)("path",{d:"M3 3l7.07 16.97 2.51-7.39 7.39-2.51L3 3z"}),(0,t.jsx)("path",{d:"M13 13l6 6"})]}),"Myš"]}),(0,t.jsxs)("button",{onClick:()=>B("point"),className:"px-3 py-2 rounded flex items-center gap-2 ".concat("point"===z?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-200"),children:[(0,t.jsx)(i.Circle,{size:18})," Bod"]}),(0,t.jsxs)("button",{onClick:()=>B("segment"),className:"px-3 py-2 rounded flex items-center gap-2 ".concat("segment"===z?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-200"),children:[(0,t.jsx)(a.Pencil,{size:18})," Úsečka"]}),(0,t.jsxs)("button",{onClick:()=>B("line"),className:"px-3 py-2 rounded flex items-center gap-2 ".concat("line"===z?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-200"),children:[(0,t.jsx)(a.Pencil,{size:18})," Přímka"]}),(0,t.jsxs)("button",{onClick:()=>B("circle"),className:"px-3 py-2 rounded flex items-center gap-2 ".concat("circle"===z?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-200"),children:[(0,t.jsx)(i.Circle,{size:18})," Kružnice"]}),(0,t.jsxs)("button",{onClick:()=>B("rubber"),className:"px-3 py-2 rounded flex items-center gap-2 ".concat("rubber"===z?"bg-red-600 text-white":"bg-white text-gray-700 hover:bg-gray-200"),children:[(0,t.jsx)(c.Eraser,{size:18})," Guma"]}),(0,t.jsx)("div",{className:"border-l-2 border-gray-300 mx-2"}),(0,t.jsxs)("button",{onClick:function(){er(!et),et?"ruler"===ep&&em(null):em("ruler")},className:"px-3 py-2 rounded flex items-center gap-2 ".concat(et?"bg-yellow-600 text-white":"bg-white text-gray-700 hover:bg-gray-200"),children:[(0,t.jsx)(u.Ruler,{size:18})," Pravítko"]}),(0,t.jsxs)("button",{onClick:function(){en(!es),es?"triangle"===ep&&em(null):em("triangle")},className:"px-3 py-2 rounded flex items-center gap-2 ".concat(es?"bg-purple-600 text-white":"bg-white text-gray-700 hover:bg-gray-200"),children:[(0,t.jsx)(d.Triangle,{size:18})," Trojúhelník"]}),(0,t.jsxs)("button",{onClick:function(){ei(!eo),eo?"protractor"===ep&&em(null):em("protractor")},className:"px-3 py-2 rounded flex items-center gap-2 ".concat(eo?"bg-orange-600 text-white":"bg-white text-gray-700 hover:bg-gray-200"),children:[(0,t.jsx)(g.Gauge,{size:18})," Úhloměr"]}),(0,t.jsx)("div",{className:"flex-1"}),(0,t.jsxs)("button",{onClick:function(){let e=A.current;if(!e||0===R.length)return;let t=R[R.length-1],r=t?e.objects[t]:void 0;r&&e.removeObject(r),I(e=>e.slice(0,-1)),L("")},className:"px-3 py-2 rounded bg-gray-700 text-white hover:bg-gray-800 flex items-center gap-2",children:[(0,t.jsx)(l.RotateCcw,{size:18})," Zpět"]}),(0,t.jsxs)("button",{onClick:function(){let e=A.current;if(!e)return;let t=[];for(let s in e.objects){var r;let n=e.objects[s];(null==n||null==(r=n.visProp)?void 0:r.fixed)||t.push(n)}t.forEach(t=>e.removeObject(t)),P([]),L(""),K(null),I([])},className:"px-3 py-2 rounded bg-red-500 text-white hover:bg-red-600 flex items-center gap-2",children:[(0,t.jsx)(o.Trash2,{size:18})," Vymazat"]}),(0,t.jsxs)("button",{onClick:eN,className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700 flex items-center gap-2",children:[(0,t.jsx)(n.Save,{size:18})," Uložit"]})]}),(0,t.jsxs)("div",{ref:O,id:"jxgbox",className:"w-full border-2 border-gray-300 rounded-lg bg-white jxgbox relative",style:{height:500,touchAction:"none"},children:[et&&(0,t.jsx)(x.default,{x:ea.x,y:ea.y,rotation:ea.rotation,length:ea.length,onPositionChange:(e,t,r,s)=>{el({x:e,y:t,rotation:r,length:s})},isActive:"ruler"===ep,onActivate:()=>em("ruler"),onUiBusyChange:eb}),es&&(0,t.jsx)(y.default,{x:ec.x,y:ec.y,rotation:ec.rotation,size:ec.size,type:"45-45-90",onPositionChange:(e,t,r,s)=>{eu({x:e,y:t,rotation:r,size:s})},isActive:"triangle"===ep,onActivate:()=>em("triangle"),onUiBusyChange:eb}),eo&&(0,t.jsx)(v.default,{x:ed.x,y:ed.y,rotation:ed.rotation,size:ed.size,onPositionChange:(e,t,r,s)=>{eg({x:e,y:t,rotation:r,size:s})},isActive:"protractor"===ep,onActivate:()=>em("protractor"),onUiBusyChange:eb})]}),(0,t.jsx)("div",{className:"mt-4 p-3 bg-blue-50 border-l-4 border-blue-500 rounded-lg",children:(0,t.jsxs)("p",{className:"text-blue-700 text-sm",children:[(0,t.jsx)("strong",{children:"Nápověda:"})," Modrý bod = přesun • Zelený bod = otočení • Oranžový bod = změna velikosti"]})}),U&&(0,t.jsx)("div",{className:"mt-4 p-4 rounded-lg ".concat(U.includes("✅")?"bg-green-50 border-l-4 border-green-500":"bg-yellow-50 border-l-4 border-yellow-500"),children:(0,t.jsx)("p",{className:"text-gray-800",children:U})})]})})}):(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:"Úloha nebyla nalezena"}),_&&(0,t.jsx)("button",{onClick:_,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Zpět"})]})})}},40216,e=>{e.n(e.i(44665))}]);