{"version":3,"sources":["turbopack:///[project]/Documents/geometry_review/app/components/GeneralGeometryTester.tsx","turbopack:///[project]/Documents/geometry_review/lib/grid-manager.ts","turbopack:///[project]/Documents/geometry_review/node_modules/lucide-react/src/icons/chevron-up.ts","turbopack:///[project]/Documents/geometry_review/node_modules/lucide-react/src/icons/rotate-cw.ts","turbopack:///[project]/Documents/geometry_review/node_modules/lucide-react/src/icons/download.ts","turbopack:///[project]/Documents/geometry_review/node_modules/lucide-react/src/icons/info.ts","turbopack:///[project]/Documents/geometry_review/node_modules/lucide-react/src/icons/upload.ts","turbopack:///[project]/Documents/geometry_review/lib/board-manager.ts","turbopack:///[project]/Documents/geometry_review/lib/undo-redo.ts"],"sourcesContent":["'use client'\n\nimport React, { useEffect, useRef, useState, useCallback } from 'react'\nimport JXG from 'jsxgraph'\nimport { Save, Trash2, Circle, Pencil, RotateCcw, RotateCw, Eraser, Ruler, Triangle, Gauge, ZoomIn, ZoomOut, Download, Upload, Info, Settings, ChevronUp } from 'lucide-react'\nimport DraggableRuler from './DraggableRuler'\nimport DraggableTriangle from './DraggableTriangle'\nimport DraggableProtractor from './DraggableProtractor'\nimport { UndoRedoManager } from '../../lib/undo-redo'\nimport { GridMode } from '../../lib/grid-manager'\nimport { BoardManager, JBoard } from '../../lib/board-manager'\n\nconst EPS = 0.05\n\nfunction dist(a: {x:number,y:number}, b:{x:number,y:number}) {\n  return Math.hypot(a.x - b.x, a.y - b.y)\n}\n\n// Helper function to snap coordinates to grid (with optional soft snapping)\nfunction snapToGrid(x: number, y: number, gridOption: GridMode, softSnap: boolean = false): {x: number, y: number} {\n  if (gridOption === 'none') return { x, y }\n  \n  let snapSize = 0.5 // default minor grid spacing\n  \n  // Fine-tuned snap sizes for smoother placement\n  if (gridOption === 'major' || gridOption === 'major-minor') {\n    snapSize = 0.25 // finer snap for major grid\n  } else if (gridOption === 'minor') {\n    snapSize = 0.1 // very fine snap for minor grid\n  } else if (gridOption === 'dot') {\n    snapSize = 0.25 // fine snap for dot grid\n  }\n  \n  // Soft snap: only snap if close to grid line (within 30% of snap size)\n  if (softSnap) {\n    const snappedX = Math.round(x / snapSize) * snapSize\n    const snappedY = Math.round(y / snapSize) * snapSize\n    const threshold = snapSize * 0.3\n    \n    const distX = Math.abs(x - snappedX)\n    const distY = Math.abs(y - snappedY)\n    \n    return {\n      x: distX < threshold ? snappedX : x,\n      y: distY < threshold ? snappedY : y\n    }\n  }\n  \n  return {\n    x: Math.round(x / snapSize) * snapSize,\n    y: Math.round(y / snapSize) * snapSize\n  }\n}\n\nfunction coordsOfPoint(p: any) { return { x: p.X(), y: p.Y() } }\n\nexport default function GeneralGeometryTester() {\n  const boardManagerRef = useRef<BoardManager | null>(null)\n  const containerRef = useRef<HTMLDivElement | null>(null)\n  const undoRedoRef = useRef<UndoRedoManager | null>(null)\n\n  const [tool, setTool] = useState<'mouse'|'point'|'segment'|'line'|'circle'|'rubber'>('mouse')\n  const [selected, setSelected] = useState<any[]>([])\n  const [feedback, setFeedback] = useState('')\n  const [data, setData] = useState<any>(null)\n  const [createdStack, setCreatedStack] = useState<string[]>([])\n  const [showHelp, setShowHelp] = useState(false)\n  const [constructionHistory, setConstructionHistory] = useState<any[]>([])\n  \n  // Physical tools state\n  const [rulerVisible, setRulerVisible] = useState(false)\n  const [triangleVisible, setTriangleVisible] = useState(false)\n  const [protractorVisible, setProtractorVisible] = useState(false)\n  const [rulerPosition, setRulerPosition] = useState({ x: 5, y: 4, rotation: 0, length: 6 })\n  const [trianglePosition, setTrianglePosition] = useState({ x: 7, y: 4, rotation: 0, size: 3 })\n  const [protractorPosition, setProtractorPosition] = useState({ x: 6, y: 3, rotation: 0, size: 3 })\n  const [activeTool, setActiveTool] = useState<'ruler' | 'triangle' | 'protractor' | null>(null)\n  const [uiBusy, setUiBusy] = useState(false)\n  \n  // Point naming state\n  const [renameMode, setRenameMode] = useState(false)\n  const [selectedPointId, setSelectedPointId] = useState<string|null>(null)\n  \n  // Grid settings state\n  const [showSettings, setShowSettings] = useState(false)\n  const [gridOption, setGridOption] = useState<GridMode>('major')\n\n  const toolRef = useRef(tool)\n  const selectedRef = useRef(selected)\n  const uiBusyRef = useRef(uiBusy)\n  const renameModeRef = useRef(renameMode)\n  const gridOptionRef = useRef(gridOption)\n  const handleClickRef = useRef<((brd: JBoard, e: any) => void) | null>(null)\n  \n  // Rename mode refs for down+up approach\n  const renameArmRef = useRef<{ pt:any|null, wasFixed:boolean }>(\n    { pt:null, wasFixed:false }\n  )\n  const downPosRef = useRef<{x:number,y:number}|null>(null)\n  \n  useEffect(() => { toolRef.current = tool }, [tool])\n  useEffect(() => { selectedRef.current = selected }, [selected])\n  useEffect(() => { uiBusyRef.current = uiBusy }, [uiBusy])\n  useEffect(() => { renameModeRef.current = renameMode }, [renameMode])\n  useEffect(() => { gridOptionRef.current = gridOption }, [gridOption])\n\n  function pushCreated(obj: any) {\n    if (obj && typeof obj === 'object' && 'id' in obj) setCreatedStack(s => [...s, obj.id])\n  }\n\n  function getMouseCoords(brd: JBoard, e: any): {x: number, y: number} {\n    const coords = brd.getUsrCoordsOfMouse(e)\n    return { x: coords[0], y: coords[1] }\n  }\n\n  // 'A_12' -> 'A₁₂'\n  function toSubscript(name: string) {\n    const map: Record<string,string> = { '0':'₀','1':'₁','2':'₂','3':'₃','4':'₄','5':'₅','6':'₆','7':'₇','8':'₈','9':'₉' }\n    return name.replace(/_(\\d+)/g, (_, d) => d.split('').map((ch: string) => map[ch] ?? ch).join(''))\n  }\n\n  // normalize and set the visible + raw name on a JSXGraph point\n  const renamePoint = useCallback((pt:any, newName:string) => {\n    const trimmed = (newName || '').trim()\n    const pretty = toSubscript(trimmed)                 // converts A_1 -> A₁\n    \n    pt.setAttribute({ name: pretty, withLabel: !!trimmed })\n    ;(pt as any)._rawName = trimmed                      // keep searchable original\n    // Removed pt.board.update() to prevent point attachment issues\n  }, [])\n\n  // find a point under event (prefers non-fixed)\n  function pointUnder(brd:JBoard, e:any) {\n    const under = brd.getAllObjectsUnderMouse(e)\n    return under.find((o:any)=>o.elType==='point') || null\n  }\n\n  function isNameTaken(brd:JBoard, raw:string, exceptId?:string) {\n    for (const k in brd.objects) {\n      const o:any = (brd.objects as any)[k]\n      if (o.elType === 'point' && o.id !== exceptId) {\n        if ((o._rawName ?? '') === raw) return true\n      }\n    }\n    return false\n  }\n\n  function nearestFreePoint(brd: JBoard, e: any) {\n    const under = brd.getAllObjectsUnderMouse(e)\n    const pt = under.find((o:any) => o.elType === 'point' && !o.visProp.fixed)\n    return pt || null\n  }\n\n  // Helper function to get or create points via history system\n  const getOrCreatePointViaHistory = useCallback((brd: JBoard, xy: {x:number, y:number}) => {\n    // Use soft snapping for smoother placement - only snap if close to grid\n    const snapped = snapToGrid(xy.x, xy.y, gridOption, true)\n    \n    // Use grid-aware EPS: slightly larger than snap size to catch nearby snapped points\n    const snapSize = gridOption === 'none' ? 0.1 : (gridOption === 'minor' ? 0.1 : 0.25)\n    const checkEPS = Math.max(EPS, snapSize * 0.8) // 80% of snap size for better precision\n    \n    // try to reuse an existing non-fixed point near the coordinates\n    const objects = Object.values(brd.objects) as any[]\n    const existing = objects.find((o: any) => {\n      if (o?.elType === 'point' && !o.visProp?.fixed) {\n        const p = { x: o.X(), y: o.Y() }\n        return Math.hypot(p.x - snapped.x, p.y - snapped.y) <= checkEPS\n      }\n      return false\n    })\n    if (existing) return existing\n\n    // create point at snapped coordinates (with soft snap)\n    const snap = gridOption !== 'none'\n    const snapSizeX = gridOption === 'none' ? 0.25 : (gridOption === 'minor' ? 0.1 : 0.25)\n    const snapSizeY = snapSizeX\n    \n    const pt = brd.create('point', [snapped.x, snapped.y], {\n      name: '', \n      size: 2, \n      strokeColor: '#444', \n      fillColor: '#666',\n      snapToGrid: snap,\n      snapSizeX: snapSizeX,\n      snapSizeY: snapSizeY\n    })\n    ;(pt as any)._rawName = ''\n    \n    // Don't create a separate point operation here - the point will be tracked\n    // automatically when the shape operation (segment/line/circle) executes\n    // The shape operations will find this point by ID and attach tracking to it\n    \n    return pt\n  }, [gridOption])\n\n  const createPointSmart = useCallback((brd: JBoard, xy: {x:number, y:number}) => {\n    // Use soft snapping for smoother placement\n    const snapped = snapToGrid(xy.x, xy.y, gridOption, true)\n    \n    // Use grid-aware EPS to check for existing points\n    const snapSize = gridOption === 'none' ? 0.1 : (gridOption === 'minor' ? 0.1 : 0.25)\n    const checkEPS = Math.max(EPS, snapSize * 0.8)\n    \n    // Check for existing points at snapped location\n    const objects = Object.values(brd.objects) as any[]\n    const existing = objects.find((o: any) => {\n      if (o?.elType === 'point' && !o.visProp?.fixed) {\n        const p = { x: o.X(), y: o.Y() }\n        return Math.hypot(p.x - snapped.x, p.y - snapped.y) <= checkEPS\n      }\n      return false\n    })\n    if (existing) return existing\n    \n    const snap = gridOption !== 'none'\n    const snapSizeX = gridOption === 'none' ? 0.25 : (gridOption === 'minor' ? 0.1 : 0.25)\n    const snapSizeY = snapSizeX\n    \n    const pt = brd.create('point', [snapped.x, snapped.y], {\n      name: '', \n      size: 2, \n      strokeColor: '#444', \n      fillColor: '#666',\n      snapToGrid: snap,\n      snapSizeX: snapSizeX,\n      snapSizeY: snapSizeY\n    })\n    ;(pt as any)._rawName = ''\n    pushCreated(pt)\n    return pt\n  }, [gridOption])\n\n  const handleClick = useCallback((brd: JBoard, e: any) => {\n    if (uiBusyRef.current) return\n    \n    // Prevent tools from firing while in rename mode\n    if (renameModeRef.current) return\n    \n    // Check if the click is on a physical tool - if so, don't handle it\n    const target = e.originalEvent?.target as HTMLElement\n    if (target && (target.closest('.group') || target.classList.contains('group'))) {\n      return // Let the physical tool handle the interaction\n    }\n    \n    const xy = getMouseCoords(brd, e)\n    const currentTool = toolRef.current\n\n    switch (currentTool) {\n      case 'mouse': {\n        // Mouse tool - do nothing, just allow interaction without creating objects\n        // Check if clicking on a point and prevent default behavior\n        const under = brd.getAllObjectsUnderMouse(e)\n        const clickedPoint = under.find((o:any) => o.elType === 'point' && !o.visProp.fixed)\n        if (clickedPoint) {\n          // Prevent default JSXGraph behavior for points when using mouse tool\n          if (e.originalEvent) {\n            e.originalEvent.preventDefault()\n            e.originalEvent.stopPropagation()\n          }\n          setFeedback('Bod vybrán')\n        } else {\n          setFeedback('')\n        }\n        break\n      }\n      case 'point': {\n        // Use soft snapping for smoother placement\n        const snapped = snapToGrid(xy.x, xy.y, gridOptionRef.current, true)\n        \n        // Check for existing point at snapped location\n        const snapSize = gridOptionRef.current === 'none' ? 0.1 : (gridOptionRef.current === 'minor' ? 0.1 : 0.25)\n        const checkEPS = Math.max(EPS, snapSize * 0.8)\n        const objects = Object.values(brd.objects) as any[]\n        const existing = objects.find((o: any) => {\n          if (o?.elType === 'point' && !o.visProp?.fixed) {\n            const p = { x: o.X(), y: o.Y() }\n            return Math.hypot(p.x - snapped.x, p.y - snapped.y) <= checkEPS\n          }\n          return false\n        })\n        \n        if (!existing) {\n          const attr = { name:'', size:2, strokeColor:'#444', fillColor:'#666' }\n          const op = undoRedoRef.current?.createPointOperation(snapped.x, snapped.y, attr)\n          if (op) undoRedoRef.current?.pushOperation(op)\n          setFeedback('Bod vytvořen')\n        } else {\n          setFeedback('Bod již existuje na této pozici')\n        }\n        break\n      }\n      case 'segment': {\n        const first = selectedRef.current[0]\n        if (!first) {\n          // first click\n          undoRedoRef.current?.begin()\n          const p = getOrCreatePointViaHistory(brd, xy)\n          if (!p) { undoRedoRef.current?.commit(); break }\n          setSelected([p])\n          setFeedback('Klikněte na druhý bod')\n          // don't commit yet; we'll finish in second click\n          break\n        }\n\n        // second click\n        const a:any = first\n        const b = getOrCreatePointViaHistory(brd, xy)\n        if (!b) { undoRedoRef.current?.commit(); setSelected([]); break }\n\n        const p1 = { x: a.X(), y: a.Y() }\n        const p2 = { x: b.X(), y: b.Y() }\n        const attr = { strokeColor:'#2563eb', strokeWidth:2 }\n        const op = undoRedoRef.current?.createSegmentOperation(p1, p2, attr)\n        if (op) {\n          op.pointIds = [a.id, b.id]              // <-- bind exact endpoints\n          undoRedoRef.current?.pushOperation(op)\n        }\n        undoRedoRef.current?.commit()\n        setSelected([])\n        setFeedback('Úsečka vytvořena')\n        break\n      }\n      case 'line': {\n        const first = selectedRef.current[0]\n        if (!first) {\n          undoRedoRef.current?.begin()\n          const p = getOrCreatePointViaHistory(brd, xy)\n          if (!p) { undoRedoRef.current?.commit(); break }\n          setSelected([p])\n          setFeedback('Klikněte na druhý bod')\n          break\n        }\n\n        const a:any = first\n        const b = getOrCreatePointViaHistory(brd, xy)\n        if (!b) { undoRedoRef.current?.commit(); setSelected([]); break }\n\n        const p1 = { x: a.X(), y: a.Y() }\n        const p2 = { x: b.X(), y: b.Y() }\n        const attr = { strokeColor:'#059669', strokeWidth:1, dash:1 }\n        const op = undoRedoRef.current?.createLineOperation(p1, p2, attr)\n        if (op) {\n          op.pointIds = [a.id, b.id]\n          undoRedoRef.current?.pushOperation(op)\n        }\n        undoRedoRef.current?.commit()\n        setSelected([])\n        setFeedback('Přímka vytvořena')\n        break\n      }\n      case 'circle': {\n        const first = selectedRef.current[0]\n        if (!first) {\n          undoRedoRef.current?.begin()\n          const c = getOrCreatePointViaHistory(brd, xy)\n          if (!c) { undoRedoRef.current?.commit(); break }\n          setSelected([c])\n          setFeedback('Klikněte na bod na kružnici')\n          break\n        }\n\n        const c:any = first\n        const p = getOrCreatePointViaHistory(brd, xy)\n        if (!p) { undoRedoRef.current?.commit(); setSelected([]); break }\n\n        const center = { x: c.X(), y: c.Y() }\n        const on     = { x: p.X(), y: p.Y() }\n        const attr = { strokeColor:'#dc2626', strokeWidth:2 }\n        const op = undoRedoRef.current?.createCircleOperation(center, on, attr)\n        if (op) {\n          op.pointIds = [c.id, p.id]\n          undoRedoRef.current?.pushOperation(op)\n        }\n        undoRedoRef.current?.commit()\n        setSelected([])\n        setFeedback('Kružnice vytvořena')\n        break\n      }\n      case 'rubber': {\n        const under = brd.getAllObjectsUnderMouse(e)\n        const toRemove:any = under.find((o:any) => !o.visProp?.fixed)\n        if (toRemove) {\n          const delOp = undoRedoRef.current?.createDeleteOperation(toRemove)\n          if (delOp) {\n            undoRedoRef.current?.pushOperation(delOp)\n            setFeedback('Objekt smazán')\n          } else {\n            // fallback: hard remove (won't be undoable)\n            brd.removeObject(toRemove as JXG.GeometryElement)\n            setFeedback('Objekt smazán (bez historie)')\n          }\n        }\n        break\n      }\n    }\n  }, [getOrCreatePointViaHistory])\n\n  useEffect(() => { handleClickRef.current = handleClick }, [handleClick])\n\n  // Keyboard shortcuts\n  useEffect(() => {\n    const handleKeyPress = (e: KeyboardEvent) => {\n      if ((e.key === 'n' || e.key === 'N') && !uiBusyRef.current) {\n        setRenameMode(v => !v)\n      }\n    }\n\n    window.addEventListener('keydown', handleKeyPress)\n    return () => window.removeEventListener('keydown', handleKeyPress)\n  }, [])\n\n  // Handle ruler position changes\n  const handleRulerPositionChange = (x: number, y: number, rotation: number, length: number) => {\n    setRulerPosition({ x, y, rotation, length })\n  }\n\n  // Handle triangle position changes\n  const handleTrianglePositionChange = (x: number, y: number, rotation: number, size: number) => {\n    setTrianglePosition({ x, y, rotation, size })\n  }\n\n  // Handle protractor position changes\n  const handleProtractorPositionChange = (x: number, y: number, rotation: number, size: number) => {\n    setProtractorPosition({ x, y, rotation, size })\n  }\n\n  function toggleRuler() {\n    setRulerVisible(!rulerVisible)\n    if (!rulerVisible) {\n      setActiveTool('ruler')\n      setTool('mouse') // Automatically switch to mouse mode when activating ruler\n    } else if (activeTool === 'ruler') {\n      setActiveTool(null)\n    }\n  }\n\n  function toggleTriangle() {\n    setTriangleVisible(!triangleVisible)\n    if (!triangleVisible) {\n      setActiveTool('triangle')\n      setTool('mouse') // Automatically switch to mouse mode when activating triangle\n    } else if (activeTool === 'triangle') {\n      setActiveTool(null)\n    }\n  }\n\n  function toggleProtractor() {\n    setProtractorVisible(!protractorVisible)\n    if (!protractorVisible) {\n      setActiveTool('protractor')\n      setTool('mouse') // Automatically switch to mouse mode when activating protractor\n    } else if (activeTool === 'protractor') {\n      setActiveTool(null)\n    }\n  }\n\n  useEffect(() => {\n    if (!containerRef.current) return\n\n    // Create board manager (handles board creation and grid management)\n    const boardManager = new BoardManager({\n      container: containerRef.current,\n      boundingbox: [-1, 8, 11, -1],\n      axis: false,\n      showNavigation: false,\n      showCopyright: false,\n      grid: false,           // we'll manage grids ourselves\n      pan: { enabled: false },\n      zoom: false,\n      keepaspectratio: true\n    })\n\n    boardManagerRef.current = boardManager\n\n    const brd = boardManager.getBoard()\n\n    // Optional: global snap-to-grid defaults for points (finer for smoother placement)\n    // (You can still override per element in your creators.)\n    JXG.Options.point.snapToGrid = true\n    JXG.Options.point.snapSizeX = 0.25\n    JXG.Options.point.snapSizeY = 0.25\n\n    // Init undo/redo\n    undoRedoRef.current = new UndoRedoManager({\n      board: brd,\n      onFeedback: setFeedback,\n      EPS: EPS\n    })\n\n    return () => {\n      boardManager.free()\n      boardManagerRef.current = null\n      undoRedoRef.current = null\n    }\n  }, [])\n\n  // When user changes the option, update the grid manager\n  useEffect(() => {\n    boardManagerRef.current?.setGridMode(gridOption)\n  }, [gridOption])\n\n  // Close settings dropdown when clicking outside\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      const target = event.target as HTMLElement\n      if (showSettings && !target.closest('.settings-dropdown')) {\n        setShowSettings(false)\n      }\n    }\n\n    if (showSettings) {\n      document.addEventListener('mousedown', handleClickOutside)\n      return () => document.removeEventListener('mousedown', handleClickOutside)\n    }\n  }, [showSettings])\n\n  // Update event handlers when rename mode changes\n  useEffect(() => {\n    const brd = boardManagerRef.current?.getBoard()\n    if (!brd) return\n\n    // Store references to our specific handlers so we can remove them properly\n    let currentDownHandler: ((e: any) => void) | null = null\n    let currentUpHandler: ((e: any) => void) | null = null\n\n    const CLICK_EPS = 0.12 // world units; tweak if needed\n\n    const openPrompt = (pt:any, e:any) => {\n      const currentRaw = (pt as any)._rawName || ''\n      let proposed = (window.prompt('Název bodu (např. A, B, C, A_1, A_2):', currentRaw) ?? '').trim()\n\n      if (proposed && isNameTaken(brd, proposed, (pt as any).id)) {\n        let i = 2\n        while (isNameTaken(brd, `${proposed}_${i}`, (pt as any).id)) i++\n        proposed = `${proposed}_${i}`\n      }\n\n      renamePoint(pt, proposed)\n\n      // Restore mobility\n      const arm = renameArmRef.current\n      ;(pt as any).setAttribute({ fixed: arm.wasFixed })\n\n      // Stop further board interaction from this click\n      if (e?.originalEvent) {\n        e.originalEvent.stopPropagation()\n        e.originalEvent.preventDefault()\n      }\n      brd.update()\n\n      if (!proposed) setRenameMode(false)\n\n      // Clear arm\n      renameArmRef.current = { pt:null, wasFixed:false }\n      downPosRef.current = null\n    }\n\n    // 1) DOWN: if in rename mode and on a point, FREEZE it and arm rename\n    currentDownHandler = (e:any) => {\n      if (uiBusyRef.current) return\n\n      // If not in rename mode, pass through to normal drawing handler and let undo-redo system handle drags\n      if (!renameModeRef.current) {\n        if (handleClickRef.current) handleClickRef.current(brd, e)\n        return\n      }\n\n      const pt = pointUnder(brd, e)\n      if (!pt) return\n\n      // Freeze now (before any drag begins)\n      const wasFixed = !!(pt as any).visProp.fixed\n      ;(pt as any).setAttribute({ fixed: true })\n\n      renameArmRef.current = { pt, wasFixed }\n      downPosRef.current = getMouseCoords(brd, e)\n\n      // Only prevent default behavior in rename mode\n      if (e.originalEvent) {\n        e.originalEvent.stopPropagation()\n        e.originalEvent.preventDefault()\n      }\n    }\n\n    // 2) UP: if we armed a point and movement was small → open prompt\n    currentUpHandler = (e:any) => {\n      const arm = renameArmRef.current\n      if (!arm.pt) return\n\n      const up = getMouseCoords(brd, e)\n      const down = downPosRef.current || up\n      const moved = Math.hypot(up.x - down.x, up.y - down.y)\n\n      // Only treat as rename if it was a click, not a drag\n      if (moved <= CLICK_EPS) {\n        openPrompt(arm.pt, e)\n        return\n      }\n\n      // If it was a drag after all, restore the point & abort rename\n      const { pt } = arm\n      ;(pt as any).setAttribute({ fixed: arm.wasFixed })\n      renameArmRef.current = { pt:null, wasFixed:false }\n      downPosRef.current = null\n    }\n\n    brd.on('down', currentDownHandler)\n    brd.on('up', currentUpHandler)\n\n    return () => {\n      try { \n        if (currentDownHandler) brd.off('down', currentDownHandler)\n        if (currentUpHandler) brd.off('up', currentUpHandler)\n      } catch {}\n    }\n  }, [renameMode, renamePoint])\n\n  function undoLast() {\n    undoRedoRef.current?.undo()\n  }\n\n  function redoLast() {\n    undoRedoRef.current?.redo()\n  }\n\n  function clearAll() {\n    const brd = boardManagerRef.current?.getBoard()\n    if (!brd) return\n    const toRemove: any[] = []\n    for (const key in brd.objects) {\n      const o: any = brd.objects[key]\n      if (!o?.visProp?.fixed) {\n        toRemove.push(o)\n      }\n    }\n    toRemove.forEach(o => brd.removeObject(o))\n    setSelected([])\n    setFeedback('')\n    setData(null)\n    setCreatedStack([])\n  }\n\n  function saveConstruction() {\n    const brd = boardManagerRef.current?.getBoard()\n    if (!brd) return\n    const timestamp = new Date().toISOString()\n    const constructionData = {\n      timestamp,\n      objects: Object.values(brd.objects).map((obj: any) => ({\n        id: obj.id,\n        type: obj.elType,\n        name: obj.name,\n        properties: obj.visProp\n      })),\n      createdStack: [...createdStack]\n    }\n    setData(constructionData)\n    setConstructionHistory(prev => [...prev, constructionData])\n    setFeedback('Konstrukce uložena')\n  }\n\n  function exportConstruction() {\n    if (!data) return\n    const dataStr = JSON.stringify(data, null, 2)\n    const dataBlob = new Blob([dataStr], { type: 'application/json' })\n    const url = URL.createObjectURL(dataBlob)\n    const link = document.createElement('a')\n    link.href = url\n    link.download = `construction_${new Date().toISOString().split('T')[0]}.json`\n    link.click()\n    URL.revokeObjectURL(url)\n    setFeedback('Konstrukce exportována')\n  }\n\n  function importConstruction(event: React.ChangeEvent<HTMLInputElement>) {\n    const file = event.target.files?.[0]\n    if (!file) return\n\n    const reader = new FileReader()\n    reader.onload = (e) => {\n      try {\n        const importedData = JSON.parse(e.target?.result as string)\n        setData(importedData)\n        setFeedback('Konstrukce načtena - klikněte na \"Načíst\" pro obnovení')\n      } catch (err) {\n        setFeedback('Chyba při načítání souboru')\n      }\n    }\n    reader.readAsText(file)\n  }\n\n  function loadConstruction() {\n    const brd = boardManagerRef.current?.getBoard()\n    if (!data || !brd) return\n    \n    // Clear current construction\n    clearAll()\n    \n    // Restore objects from data\n    // This is a simplified restoration - in a real implementation you'd need more sophisticated logic\n    setFeedback('Konstrukce načtena')\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 p-6\">\n      <div className=\"max-w-6xl mx-auto\">\n        <div className=\"bg-white rounded-lg shadow-lg p-6 mb-6\">\n          <h1 className=\"text-2xl font-bold text-gray-800 mb-4\">\n            Obecné geometrické testování\n          </h1>\n\n          <div className=\"bg-green-50 border-l-4 border-green-500 p-4 mb-4\">\n            <p className=\"text-gray-700\">\n              Volné testovací pole pro geometrické konstrukce. Můžete používat všechny dostupné nástroje bez specifických požadavků.\n            </p>\n            <div className=\"mt-2 flex items-center gap-2\">\n              <button\n                onClick={() => setShowHelp(!showHelp)}\n                className=\"flex items-center gap-1 text-sm text-blue-600 hover:text-blue-800\"\n              >\n                <Info size={14} />\n                {showHelp ? 'Skrýt nápovědu' : 'Zobrazit nápovědu'}\n              </button>\n            </div>\n          </div>\n\n          {showHelp && (\n            <div className=\"bg-blue-50 border-l-4 border-blue-500 p-4 mb-4\">\n              <h3 className=\"font-semibold text-blue-800 mb-2\">Nápověda k nástrojům:</h3>\n              <div className=\"grid md:grid-cols-2 gap-4 text-sm text-blue-700\">\n                <div>\n                  <h4 className=\"font-medium mb-1\">Základní nástroje:</h4>\n                  <ul className=\"space-y-1\">\n                    <li>• <strong>Myš:</strong> Interakce s objekty bez vytváření</li>\n                    <li>• <strong>Bod:</strong> Vytvoření bodu kliknutím</li>\n                    <li>• <strong>Úsečka:</strong> Klikněte na dva body</li>\n                    <li>• <strong>Přímka:</strong> Klikněte na dva body</li>\n                    <li>• <strong>Kružnice:</strong> Střed a bod na kružnici</li>\n                    <li>• <strong>Guma:</strong> Smazání objektu</li>\n                  </ul>\n                </div>\n                <div>\n                  <h4 className=\"font-medium mb-1\">Fyzické nástroje:</h4>\n                  <ul className=\"space-y-1\">\n                    <li>• <strong>Pravítko:</strong> Měření vzdáleností</li>\n                    <li>• <strong>Trojúhelník:</strong> Rýsování úhlů</li>\n                    <li>• <strong>Úhloměr:</strong> Měření úhlů</li>\n                    <li>• <strong>Modrý bod:</strong> Přesun nástroje</li>\n                    <li>• <strong>Zelený bod:</strong> Otočení nástroje</li>\n                    <li>• <strong>Oranžový bod:</strong> Změna velikosti</li>\n                  </ul>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Toolbar */}\n          <div className=\"flex flex-wrap gap-2 mb-4 p-4 bg-gray-100 rounded-lg\">\n            <button \n              onClick={() => setTool('mouse')}\n              className={`px-3 py-2 rounded flex items-center gap-2 ${\n                tool === 'mouse' ? 'bg-gray-600 text-white' : 'bg-white text-gray-700 hover:bg-gray-200'\n              }`}\n            >\n              <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n                <path d=\"M3 3l7.07 16.97 2.51-7.39 7.39-2.51L3 3z\"/>\n                <path d=\"M13 13l6 6\"/>\n              </svg>\n              Myš\n            </button>\n            <button \n              onClick={() => setTool('point')}\n              className={`px-3 py-2 rounded flex items-center gap-2 ${\n                tool === 'point' ? 'bg-blue-600 text-white' : 'bg-white text-gray-700 hover:bg-gray-200'\n              }`}\n            >\n              <Circle size={18}/> Bod\n            </button>\n            <button \n              onClick={() => setTool('segment')}\n              className={`px-3 py-2 rounded flex items-center gap-2 ${\n                tool === 'segment' ? 'bg-blue-600 text-white' : 'bg-white text-gray-700 hover:bg-gray-200'\n              }`}\n            >\n              <Pencil size={18}/> Úsečka\n            </button>\n            <button \n              onClick={() => setTool('line')}\n              className={`px-3 py-2 rounded flex items-center gap-2 ${\n                tool === 'line' ? 'bg-blue-600 text-white' : 'bg-white text-gray-700 hover:bg-gray-200'\n              }`}\n            >\n              <Pencil size={18}/> Přímka\n            </button>\n            <button \n              onClick={() => setTool('circle')}\n              className={`px-3 py-2 rounded flex items-center gap-2 ${\n                tool === 'circle' ? 'bg-blue-600 text-white' : 'bg-white text-gray-700 hover:bg-gray-200'\n              }`}\n            >\n              <Circle size={18}/> Kružnice\n            </button>\n            <button \n              onClick={() => setTool('rubber')}\n              className={`px-3 py-2 rounded flex items-center gap-2 ${\n                tool === 'rubber' ? 'bg-red-600 text-white' : 'bg-white text-gray-700 hover:bg-gray-200'\n              }`}\n            >\n              <Eraser size={18}/> Guma\n            </button>\n            <button \n              onClick={() => setRenameMode(v => !v)}\n              className={`px-3 py-2 rounded flex items-center gap-2 ${\n                renameMode ? 'bg-teal-600 text-white' : 'bg-white text-gray-700 hover:bg-gray-200'\n              }`}\n              title=\"Přejmenovat bod (klikněte na bod)\"\n            >\n              ✎ Název bodu\n            </button>\n            \n            <div className=\"border-l-2 border-gray-300 mx-2\"></div>\n            \n            <button \n              onClick={toggleRuler}\n              className={`px-3 py-2 rounded flex items-center gap-2 ${\n                rulerVisible ? 'bg-yellow-600 text-white' : 'bg-white text-gray-700 hover:bg-gray-200'\n              }`}\n            >\n              <Ruler size={18}/> Pravítko\n            </button>\n            <button \n              onClick={toggleTriangle}\n              className={`px-3 py-2 rounded flex items-center gap-2 ${\n                triangleVisible ? 'bg-purple-600 text-white' : 'bg-white text-gray-700 hover:bg-gray-200'\n              }`}\n            >\n              <Triangle size={18}/> Trojúhelník\n            </button>\n            <button \n              onClick={toggleProtractor}\n              className={`px-3 py-2 rounded flex items-center gap-2 ${\n                protractorVisible ? 'bg-orange-600 text-white' : 'bg-white text-gray-700 hover:bg-gray-200'\n              }`}\n            >\n              <Gauge size={18}/> Úhloměr\n            </button>\n\n            <div className=\"flex-1\"></div>\n\n            <button onClick={undoLast} className=\"px-3 py-2 rounded bg-gray-700 text-white hover:bg-gray-800 flex items-center gap-2\">\n              <RotateCcw size={18}/> Zpět\n            </button>\n            <button onClick={redoLast} className=\"px-3 py-2 rounded bg-gray-700 text-white hover:bg-gray-800 flex items-center gap-2\">\n              <RotateCw size={18}/> Znovu\n            </button>\n            <button onClick={clearAll} className=\"px-3 py-2 rounded bg-red-500 text-white hover:bg-red-600 flex items-center gap-2\">\n              <Trash2 size={18}/> Vymazat\n            </button>\n            <button onClick={saveConstruction} className=\"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700 flex items-center gap-2\">\n              <Save size={18}/> Uložit\n            </button>\n            <button onClick={exportConstruction} disabled={!data} className=\"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2\">\n              <Download size={18}/> Export\n            </button>\n            <label className=\"px-3 py-2 rounded bg-purple-600 text-white hover:bg-purple-700 cursor-pointer flex items-center gap-2\">\n              <Upload size={18}/> Import\n              <input\n                type=\"file\"\n                accept=\".json\"\n                onChange={importConstruction}\n                className=\"hidden\"\n              />\n            </label>\n            <button onClick={loadConstruction} disabled={!data} className=\"px-3 py-2 rounded bg-orange-600 text-white hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2\">\n              <Upload size={18}/> Načíst\n            </button>\n          </div>\n\n          <div className=\"relative\">\n            {/* Settings Button - positioned outside JSXGraph container */}\n            <div className=\"absolute top-2 right-2 z-50 settings-dropdown\" style={{ zIndex: 9999 }}>\n              <button\n                onClick={() => setShowSettings(!showSettings)}\n                className=\"p-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg shadow-lg transition-colors\"\n                title=\"Nastavení mřížky\"\n                style={{ zIndex: 10000 }}\n              >\n                <Settings size={18} />\n              </button>\n              \n              {/* Settings Dropdown */}\n              {showSettings && (\n                <div className=\"absolute top-12 right-0 bg-white border border-gray-300 rounded-lg shadow-lg min-w-48 z-20\" style={{ zIndex: 10001 }}>\n                  <div className=\"p-3 border-b border-gray-200\">\n                    <div className=\"flex items-center gap-2 text-gray-700 font-medium\">\n                      <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n                        <path d=\"M3 3h18v18H3z\"/>\n                        <path d=\"M9 9h6v6H9z\"/>\n                        <path d=\"M3 9h6\"/>\n                        <path d=\"M15 9h6\"/>\n                        <path d=\"M3 15h6\"/>\n                        <path d=\"M15 15h6\"/>\n                        <path d=\"M9 3v6\"/>\n                        <path d=\"M9 15v6\"/>\n                        <path d=\"M15 3v6\"/>\n                        <path d=\"M15 15v6\"/>\n                      </svg>\n                      Zobrazit mřížku\n                      <ChevronUp size={14} />\n                    </div>\n                  </div>\n                  <div className=\"py-1\">\n                    <button\n                      onClick={() => {\n                        setGridOption('none')\n                        setShowSettings(false)\n                      }}\n                      className={`w-full text-left px-4 py-2 text-sm hover:bg-gray-100 ${\n                        gridOption === 'none' ? 'bg-gray-100 text-gray-900' : 'text-gray-700'\n                      }`}\n                    >\n                      Žádná mřížka\n                    </button>\n                    <button\n                      onClick={() => {\n                        setGridOption('major')\n                        setShowSettings(false)\n                      }}\n                      className={`w-full text-left px-4 py-2 text-sm hover:bg-gray-100 ${\n                        gridOption === 'major' ? 'bg-gray-100 text-gray-900' : 'text-gray-700'\n                      }`}\n                    >\n                      Hlavní mřížka\n                    </button>\n                    <button\n                      onClick={() => {\n                        setGridOption('minor')\n                        setShowSettings(false)\n                      }}\n                      className={`w-full text-left px-4 py-2 text-sm hover:bg-gray-100 ${\n                        gridOption === 'minor' ? 'bg-gray-100 text-gray-900' : 'text-gray-700'\n                      }`}\n                    >\n                      Vedlejší mřížka\n                    </button>\n                    <button\n                      onClick={() => {\n                        setGridOption('major-minor')\n                        setShowSettings(false)\n                      }}\n                      className={`w-full text-left px-4 py-2 text-sm hover:bg-gray-100 ${\n                        gridOption === 'major-minor' ? 'bg-gray-100 text-gray-900' : 'text-gray-700'\n                      }`}\n                    >\n                      Hlavní a vedlejší mřížka\n                    </button>\n                    <button\n                      onClick={() => {\n                        setGridOption('dot')\n                        setShowSettings(false)\n                      }}\n                      className={`w-full text-left px-4 py-2 text-sm hover:bg-gray-100 ${\n                        gridOption === 'dot' ? 'bg-gray-100 text-gray-900' : 'text-gray-700'\n                      }`}\n                    >\n                      Bodová mřížka\n                    </button>\n                  </div>\n                </div>\n              )}\n            </div>\n\n            <div \n              ref={containerRef} \n              id=\"jxgbox\" \n              className=\"w-full border-2 border-gray-300 rounded-lg bg-white jxgbox\" \n              style={{ height: 500, touchAction: 'none' }} \n            >\n            {/* Draggable Ruler */}\n            {rulerVisible && (\n              <DraggableRuler\n                x={rulerPosition.x}\n                y={rulerPosition.y}\n                rotation={rulerPosition.rotation}\n                length={rulerPosition.length}\n                onPositionChange={handleRulerPositionChange}\n                isActive={activeTool === 'ruler'}\n                onActivate={() => {\n                  setActiveTool('ruler')\n                  setTool('mouse') // Automatically switch to mouse mode when clicking ruler\n                }}\n                onUiBusyChange={setUiBusy}\n              />\n            )}\n            \n            {/* Draggable Triangle */}\n            {triangleVisible && (\n              <DraggableTriangle\n                x={trianglePosition.x}\n                y={trianglePosition.y}\n                rotation={trianglePosition.rotation}\n                size={trianglePosition.size}\n                type=\"45-45-90\"\n                onPositionChange={handleTrianglePositionChange}\n                isActive={activeTool === 'triangle'}\n                onActivate={() => {\n                  setActiveTool('triangle')\n                  setTool('mouse') // Automatically switch to mouse mode when clicking triangle\n                }}\n                onUiBusyChange={setUiBusy}\n              />\n            )}\n            \n            {/* Draggable Protractor */}\n            {protractorVisible && (\n              <DraggableProtractor\n                x={protractorPosition.x}\n                y={protractorPosition.y}\n                rotation={protractorPosition.rotation}\n                size={protractorPosition.size}\n                onPositionChange={handleProtractorPositionChange}\n                isActive={activeTool === 'protractor'}\n                onActivate={() => {\n                  setActiveTool('protractor')\n                  setTool('mouse') // Automatically switch to mouse mode when clicking protractor\n                }}\n                onUiBusyChange={setUiBusy}\n              />\n            )}\n            </div>\n          </div>\n\n          <div className=\"mt-4 p-3 bg-blue-50 border-l-4 border-blue-500 rounded-lg\">\n            <p className=\"text-blue-700 text-sm\">\n              <strong>Nápověda:</strong> Modrý bod = přesun • Zelený bod = otočení • Oranžový bod = změna velikosti\n            </p>\n          </div>\n\n          {feedback && (\n            <div className={`mt-4 p-4 rounded-lg ${\n              feedback.includes('✅') ? 'bg-green-50 border-l-4 border-green-500' : 'bg-yellow-50 border-l-4 border-yellow-500'\n            }`}>\n              <p className=\"text-gray-800\">{feedback}</p>\n            </div>\n          )}\n\n          {/* Construction History */}\n          {constructionHistory.length > 0 && (\n            <div className=\"mt-6 bg-gray-50 rounded-lg p-4\">\n              <h3 className=\"text-lg font-semibold text-gray-800 mb-3\">Historie konstrukcí</h3>\n              <div className=\"space-y-2 max-h-40 overflow-y-auto\">\n                {constructionHistory.map((construction, index) => (\n                  <div key={index} className=\"flex items-center justify-between p-2 bg-white rounded border\">\n                    <div>\n                      <span className=\"text-sm font-medium\">Konstrukce {index + 1}</span>\n                      <span className=\"text-xs text-gray-500 ml-2\">\n                        {new Date(construction.timestamp).toLocaleString('cs-CZ')}\n                      </span>\n                    </div>\n                    <div className=\"text-xs text-gray-500\">\n                      {construction.objects?.length || 0} objektů\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  )\n}\n","// lib/grid-manager.ts\nimport JXG from 'jsxgraph'\n\nexport type GridMode = 'none' | 'major' | 'minor' | 'major-minor' | 'dot'\ntype JBoard = JXG.Board & { renderer: any }\n\nexport class GridManager {\n  private gridLines: any[] = []\n  private mode: GridMode = 'none'\n  private dotStep = 0.5 // world units\n  private container: HTMLElement\n\n  constructor(private board: JBoard, container: HTMLElement) {\n    this.container = container\n    // ensure background sits below the canvas\n    this.container.style.position = this.container.style.position || 'relative'\n  }\n\n  setMode(mode: GridMode) {\n    if (this.mode === mode) return\n    this.mode = mode\n    this.clearAll()\n    switch (mode) {\n      case 'none':\n        this.applyDot(false)\n        break\n      case 'major':\n        this.createLineGrid(1.0, '#e5e7eb', 1)\n        this.applyDot(false)\n        break\n      case 'minor':\n        this.createLineGrid(0.2, '#f3f4f6', 0.5)\n        this.applyDot(false)\n        break\n      case 'major-minor':\n        this.createLineGrid(0.2, '#f3f4f6', 0.5)\n        this.createLineGrid(1.0, '#d1d5db', 1)\n        this.applyDot(false)\n        break\n      case 'dot':\n        this.applyDot(true)\n        break\n    }\n    this.board.update()\n  }\n\n  setDotStep(stepWorldUnits: number) {\n    this.dotStep = Math.max(0.1, stepWorldUnits)\n    if (this.mode === 'dot') this.applyDot(true)\n  }\n\n  /** Keep the dot background in sync with pixel scaling */\n  sync() {\n    if (this.mode !== 'dot') return\n    this.applyDot(true)\n  }\n\n  private createLineGrid(step: number, color: string, strokeWidth: number) {\n    const bbox = this.board.getBoundingBox()\n    \n    // Create vertical lines\n    for (let x = bbox[0]; x <= bbox[2]; x += step) {\n      const line = this.board.create('line', [[x, bbox[1]], [x, bbox[3]]], {\n        strokeColor: color,\n        strokeWidth: strokeWidth,\n        fixed: true,\n        highlight: false,\n        layer: 0,\n        withLabel: false,\n        showInfobox: false,\n        visible: true,\n        trace: false,\n        track: false,\n        draggable: false\n      })\n      this.gridLines.push(line)\n    }\n    \n    // Create horizontal lines\n    for (let y = bbox[3]; y <= bbox[1]; y += step) {\n      const line = this.board.create('line', [[bbox[0], y], [bbox[2], y]], {\n        strokeColor: color,\n        strokeWidth: strokeWidth,\n        fixed: true,\n        highlight: false,\n        layer: 0,\n        withLabel: false,\n        showInfobox: false,\n        visible: true,\n        trace: false,\n        track: false,\n        draggable: false\n      })\n      this.gridLines.push(line)\n    }\n  }\n\n  private clearAll() {\n    this.gridLines.forEach(line => {\n      try { this.board.removeObject(line) } catch {}\n    })\n    this.gridLines = []\n  }\n\n  private applyDot(enabled: boolean) {\n    if (!enabled) {\n      this.container.style.backgroundImage = ''\n      this.container.style.backgroundSize = ''\n      this.container.style.backgroundPosition = ''\n      return\n    }\n    // Convert world units to pixels using board.unitX/unitY\n    const pxX = this.dotStep * this.board.unitX\n    const pxY = this.dotStep * this.board.unitY\n    // Subtle dot (1px) using radial gradient\n    this.container.style.backgroundImage =\n      'radial-gradient(circle, #e5e7eb 1px, transparent 1px)'\n    this.container.style.backgroundSize = `${pxX}px ${pxY}px`\n    // Keep the pattern aligned to the origin\n    // If you allow pan/zoom, you could compute an offset from the bbox.\n    this.container.style.backgroundPosition = `0 0`\n  }\n}\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [['path', { d: 'm18 15-6-6-6 6', key: '153udz' }]];\n\n/**\n * @component @name ChevronUp\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMTggMTUtNi02LTYgNiIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/chevron-up\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ChevronUp = createLucideIcon('chevron-up', __iconNode);\n\nexport default ChevronUp;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8', key: '1p45f6' }],\n  ['path', { d: 'M21 3v5h-5', key: '1q7to0' }],\n];\n\n/**\n * @component @name RotateCw\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjEgMTJhOSA5IDAgMSAxLTktOWMyLjUyIDAgNC45MyAxIDYuNzQgMi43NEwyMSA4IiAvPgogIDxwYXRoIGQ9Ik0yMSAzdjVoLTUiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/rotate-cw\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst RotateCw = createLucideIcon('rotate-cw', __iconNode);\n\nexport default RotateCw;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M12 15V3', key: 'm9g1x1' }],\n  ['path', { d: 'M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4', key: 'ih7n3h' }],\n  ['path', { d: 'm7 10 5 5 5-5', key: 'brsn70' }],\n];\n\n/**\n * @component @name Download\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTIgMTVWMyIgLz4KICA8cGF0aCBkPSJNMjEgMTV2NGEyIDIgMCAwIDEtMiAySDVhMiAyIDAgMCAxLTItMnYtNCIgLz4KICA8cGF0aCBkPSJtNyAxMCA1IDUgNS01IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/download\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Download = createLucideIcon('download', __iconNode);\n\nexport default Download;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['circle', { cx: '12', cy: '12', r: '10', key: '1mglay' }],\n  ['path', { d: 'M12 16v-4', key: '1dtifu' }],\n  ['path', { d: 'M12 8h.01', key: 'e9boi3' }],\n];\n\n/**\n * @component @name Info\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCIgLz4KICA8cGF0aCBkPSJNMTIgMTZ2LTQiIC8+CiAgPHBhdGggZD0iTTEyIDhoLjAxIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/info\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Info = createLucideIcon('info', __iconNode);\n\nexport default Info;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M12 3v12', key: '1x0j5s' }],\n  ['path', { d: 'm17 8-5-5-5 5', key: '7q97r8' }],\n  ['path', { d: 'M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4', key: 'ih7n3h' }],\n];\n\n/**\n * @component @name Upload\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTIgM3YxMiIgLz4KICA8cGF0aCBkPSJtMTcgOC01LTUtNSA1IiAvPgogIDxwYXRoIGQ9Ik0yMSAxNXY0YTIgMiAwIDAgMS0yIDJINWEyIDIgMCAwIDEtMi0ydi00IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/upload\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Upload = createLucideIcon('upload', __iconNode);\n\nexport default Upload;\n","// lib/board-manager.ts\nimport JXG from 'jsxgraph'\nimport { GridManager, GridMode } from './grid-manager'\n\nexport type JBoard = JXG.Board & { renderer: any }\n\nexport interface BoardOptions {\n  boundingbox?: [number, number, number, number]\n  axis?: boolean\n  showNavigation?: boolean\n  showCopyright?: boolean\n  grid?: boolean\n  pan?: { enabled: boolean }\n  zoom?: boolean\n  keepaspectratio?: boolean\n}\n\nexport interface BoardManagerOptions extends BoardOptions {\n  container: HTMLElement\n  defaultGridMode?: GridMode\n}\n\nexport class BoardManager {\n  private board: JBoard | null = null\n  private gridManager: GridManager | null = null\n  private container: HTMLElement | null = null\n  private options: BoardOptions\n\n  constructor(options: BoardManagerOptions) {\n    this.container = options.container\n    const { container, defaultGridMode, ...boardOptions } = options\n    this.options = {\n      boundingbox: [-1, 8, 11, -1],\n      axis: false,\n      showNavigation: false,\n      showCopyright: false,\n      grid: false,\n      pan: { enabled: false },\n      zoom: false,\n      keepaspectratio: true,\n      ...boardOptions\n    }\n    this.init(boardOptions, defaultGridMode)\n  }\n\n  private init(boardOptions: BoardOptions, defaultGridMode?: GridMode) {\n    if (!this.container) {\n      throw new Error('Container element is required')\n    }\n\n    if (this.board) {\n      throw new Error('Board already initialized')\n    }\n\n    // Create board\n    this.board = JXG.JSXGraph.initBoard(this.container, {\n      ...this.options,\n      ...boardOptions\n    }) as JBoard\n\n    // Create grid manager\n    this.gridManager = new GridManager(this.board, this.container)\n\n    // Set initial grid mode if provided\n    if (defaultGridMode) {\n      this.gridManager.setMode(defaultGridMode)\n    }\n\n    // Set up global event wiring for future pan/zoom support\n    // This can be extended later for pan/zoom functionality\n    this.setupGlobalEvents()\n  }\n\n  /**\n   * Get the board instance (typed getter)\n   */\n  getBoard(): JBoard {\n    if (!this.board) {\n      throw new Error('Board not initialized')\n    }\n    return this.board\n  }\n\n  /**\n   * Get the grid manager instance\n   */\n  getGridManager(): GridManager {\n    if (!this.gridManager) {\n      throw new Error('GridManager not initialized')\n    }\n    return this.gridManager\n  }\n\n  /**\n   * Set grid mode via GridManager\n   */\n  setGridMode(mode: GridMode) {\n    this.gridManager?.setMode(mode)\n  }\n\n  /**\n   * Setup global event wiring (for later pan/zoom support)\n   */\n  private setupGlobalEvents() {\n    if (!this.board) return\n\n    // If you ever enable pan/zoom, keep the dot grid in sync:\n    // this.board.on('boundingbox', () => {\n    //   this.gridManager?.sync()\n    // })\n\n    // Add other global event handlers here as needed\n  }\n\n  /**\n   * Update board options (for dynamic changes like pan/zoom)\n   */\n  updateOptions(options: Partial<BoardOptions>) {\n    if (!this.board) {\n      throw new Error('Board not initialized')\n    }\n    this.options = { ...this.options, ...options }\n    // Apply options to board as needed\n    // Note: Some options may require board recreation\n  }\n\n  /**\n   * Free the board and clean up resources\n   */\n  free() {\n    if (this.board) {\n      try {\n        JXG.JSXGraph.freeBoard(this.board)\n      } catch (e) {\n        // Ignore errors during cleanup\n      }\n      this.board = null\n    }\n    this.gridManager = null\n    this.container = null\n  }\n}\n\n","/**\n * Standalone Undo/Redo System for JSXGraph Geometry\n * \n * This module provides a clean, isolated undo/redo system that can be easily\n * integrated into any JSXGraph-based geometry application.\n */\n\nimport JXG from 'jsxgraph'\n\ntype JBoard = JXG.Board & { renderer: any }\n\n// Operation types\nexport type CreateOp = {\n  kind: 'create'\n  elType: 'point' | 'segment' | 'line' | 'circle'\n  payload: any\n  _id?: string\n  pointIds?: string[]\n}\n\nexport type DeleteOp = {\n  kind: 'delete'\n  elType: 'point' | 'segment' | 'line' | 'circle'\n  payload: any\n  _id?: string\n  pointIds?: string[]\n}\n\nexport type ModifyOp = {\n  kind: 'modify'\n  pointId: string\n  before: { x: number; y: number; name: string }\n  after: { x: number; y: number; name: string }\n}\n\nexport type BundleOp = {\n  kind: 'bundle'\n  ops: Operation[]\n}\n\nexport type Operation = CreateOp | DeleteOp | ModifyOp | BundleOp\n\n// Configuration for the undo/redo system\nexport interface UndoRedoConfig {\n  board: JBoard\n  onFeedback?: (message: string) => void\n  EPS?: number\n}\n\nexport class UndoRedoManager {\n  private board: JBoard\n  private undoStack: Operation[] = []\n  private redoStack: Operation[] = []\n  private onFeedback: ((message: string) => void) | undefined\n  private EPS: number\n  private txnDepth = 0\n  private pendingOps: Operation[] = []\n  private suppressTracking = false\n  private moveStarts = new Map<string, { x: number; y: number; name: string }>()\n  private trackingInterval: NodeJS.Timeout | null = null\n  private withinTol(a: number, b: number, tol = this.EPS): boolean { \n    return Math.abs(a - b) <= tol \n  }\n\n  private withSuppressed<T>(fn: () => T): T {\n    const prev = this.suppressTracking\n    this.suppressTracking = true\n    try { return fn() } finally { this.suppressTracking = prev }\n  }\n\n  constructor(config: UndoRedoConfig) {\n    this.board = config.board\n    this.onFeedback = config.onFeedback\n    this.EPS = config.EPS || 0.03\n    this.setupGlobalPointTracking()\n  }\n\n  // Public API\n  public pushOperation(op: Operation): void {\n    const frozen = structuredClone(op)\n    this.withSuppressed(() => this.performOperation(frozen))\n    if (this.txnDepth > 0) {\n      this.pendingOps.push(frozen)\n    } else {\n      this.undoStack.push(frozen)\n      this.redoStack = [] // Clear redo stack on new operation\n    }\n  }\n\n  public begin(): void { \n    this.txnDepth++ \n  }\n\n  public commit(): void {\n    if (this.txnDepth === 0) return\n    this.txnDepth--\n    if (this.txnDepth > 0) return\n    if (this.pendingOps.length === 0) return\n    // compress: push a synthetic op that replays the batch\n    const bundle = structuredClone(this.pendingOps)\n    this.pendingOps = []\n    this.undoStack.push({ kind: 'bundle', ops: bundle } as BundleOp)\n    this.redoStack = []\n  }\n\n  public undo(): void {\n    if (this.undoStack.length === 0) return\n    \n    const op = this.undoStack.pop()!\n    const frozen = structuredClone(op)\n    this.suppressTracking = true\n    try {\n      this.rollbackOperation(frozen)\n    } finally {\n      this.suppressTracking = false\n    }\n    this.redoStack.push(frozen)\n    this.board.update()\n    this.onFeedback?.('')\n  }\n\n  public redo(): void {\n    if (this.redoStack.length === 0) return\n    \n    const op = this.redoStack.pop()!\n    const frozen = structuredClone(op)\n    this.suppressTracking = true\n    try {\n      this.performOperation(frozen)\n    } finally {\n      this.suppressTracking = false\n    }\n    this.undoStack.push(frozen)\n    this.board.update()\n    this.onFeedback?.('')\n  }\n\n  public canUndo(): boolean {\n    return this.undoStack.length > 0\n  }\n\n  public canRedo(): boolean {\n    return this.redoStack.length > 0\n  }\n\n  public clear(): void {\n    this.undoStack = []\n    this.redoStack = []\n  }\n\n  public dispose(): void {\n    this.moveStarts.clear()\n    if (this.trackingInterval) {\n      clearInterval(this.trackingInterval)\n      this.trackingInterval = null\n    }\n  }\n\n  private setupGlobalPointTracking(): void {\n    // Attach tracking to all existing points\n    this.attachTrackingToAllPoints()\n    \n    // Set up a periodic check to attach tracking to any new points\n    this.trackingInterval = setInterval(() => {\n      this.attachTrackingToAllPoints()\n    }, 1000) // Check every second\n  }\n\n  private attachTrackingToAllPoints(): void {\n    const objects = Object.values(this.board.objects) as any[]\n    for (const obj of objects) {\n      if (obj?.elType === 'point' && !obj.visProp?.fixed) {\n        this.attachPointTracking(obj)\n      }\n    }\n  }\n\n  private posOf(pt: any): { x: number; y: number; name: string } {\n    return { x: pt.X(), y: pt.Y(), name: (pt as any)._rawName || '' }\n  }\n\n  private definingPointsOf(obj: any): any[] {\n    if (!obj) return []\n    if (obj.elType === 'segment' || obj.elType === 'line') {\n      const a: any = obj.point1 || obj.A || obj.points?.[0]\n      const b: any = obj.point2 || obj.B || obj.points?.[1]\n      return [a, b].filter(Boolean)\n    }\n    if (obj.elType === 'circle') {\n      const c: any = obj.center || obj.points?.[0]\n      const p: any = obj.point2 || obj.points?.[1]\n      return [c, p].filter(Boolean)\n    }\n    return []\n  }\n\n  private attachPointTracking(pt: any): void {\n    // Avoid double-binding\n    if ((pt as any)._undoRedoBound) return\n    ;(pt as any)._undoRedoBound = true\n\n    pt.on('down', () => {\n      if (this.suppressTracking) return\n      this.moveStarts.set(pt.id, this.posOf(pt))\n    })\n\n    pt.on('up', () => {\n      if (this.suppressTracking) return\n      const start = this.moveStarts.get(pt.id)\n      if (!start) return\n      const end = this.posOf(pt)\n\n      const moved = !this.withinTol(start.x, end.x) || !this.withinTol(start.y, end.y) || start.name !== end.name\n      if (moved) {\n        const op: ModifyOp = { kind: 'modify', pointId: pt.id, before: start, after: end }\n        this.pushOperation(op)\n      }\n      this.moveStarts.delete(pt.id)\n    })\n  }\n\n  private attachShapeTracking(obj: any): void {\n    // For segment/line/circle: record a BUNDLE of point moves\n    let before: Record<string, { x: number; y: number; name: string }> | null = null\n    let pts: any[] = []\n\n    const onDown = () => {\n      if (this.suppressTracking) return\n      pts = this.definingPointsOf(obj)\n      if (pts.length === 0) return\n      before = {}\n      for (const p of pts) before[p.id] = this.posOf(p)\n    }\n\n    const onUp = () => {\n      if (this.suppressTracking || !before || pts.length === 0) return\n      const ops: Operation[] = []\n      for (const p of pts) {\n        const b = before![p.id]\n        if (!b) continue\n        const a = this.posOf(p)\n        if (b.x !== a.x || b.y !== a.y || b.name !== a.name) {\n          ops.push({\n            kind: 'modify',\n            pointId: p.id,\n            before: b,\n            after: a\n          } as ModifyOp)\n        }\n      }\n      if (ops.length === 1 && ops[0]) {\n        this.pushOperation(ops[0])                 // single move\n      } else if (ops.length > 1) {\n        this.pushOperation({ kind: 'bundle', ops }) // move both endpoints / center+radius\n      }\n      before = null\n      pts = []\n    }\n\n    obj.on('down', onDown)\n    obj.on('up', onUp)\n  }\n\n  private findPointNear(xy: { x: number; y: number }, tol = this.EPS): any {\n    const objs = Object.values(this.board.objects) as any[]\n    for (const o of objs) {\n      if (o?.elType === 'point') {\n        const p = { x: o.X(), y: o.Y() }\n        if (Math.hypot(p.x - xy.x, p.y - xy.y) <= tol) return o\n      }\n    }\n    return null\n  }\n\n  private isJXGPoint(p: any): boolean {\n    return !!(\n      p &&\n      p.elType === 'point' &&\n      typeof p.X === 'function' &&\n      typeof p.Y === 'function' &&\n      p.board === this.board\n    )\n  }\n\n  private getPointByIdOrNear(prefId: string | undefined, xy: { x: number; y: number }, tol = this.EPS): any {\n    if (prefId) {\n      const byId = (this.board.objects as any)[prefId]\n      if (byId?.elType === 'point') return byId\n    }\n    // exact coordinate match first\n    for (const o of Object.values(this.board.objects) as any[]) {\n      if (o?.elType === 'point' && o.X() === xy.x && o.Y() === xy.y) return o\n    }\n    // then proximity\n    const nearPoint = this.findPointNear(xy, tol)\n    if (nearPoint) return nearPoint\n    \n    // If no point found, return null (will be handled by fallback in calling code)\n    return null\n  }\n\n  private ensurePoint(\n    xy: { x: number; y: number },\n    attr: any = { name: '', size: 2, strokeColor: '#444', fillColor: '#666' }\n  ): any | null {\n    const existing = this.findPointNear(xy)\n    if (existing) {\n      this.attachPointTracking(existing)\n      return existing\n    }\n\n    try {\n      const pt = this.board.create('point', [xy.x, xy.y], attr)\n      if (!this.isJXGPoint(pt)) throw new Error('Invalid point')\n      ;(pt as any)._rawName = attr?.name ?? ''\n      if (attr?.fixed !== undefined) pt.setAttribute({ fixed: attr.fixed })\n      if (attr?.withLabel !== undefined) pt.setAttribute({ withLabel: attr.withLabel })\n      \n      // Attach move tracking to the new point\n      this.attachPointTracking(pt)\n      \n      return pt\n    } catch (error) {\n      console.error('Failed to create point:', error)\n      return null\n    }\n  }\n\n  private performOperation(op: Operation): void {\n    if (op.kind === 'create') {\n      this.performCreate(op)\n    } else if (op.kind === 'delete') {\n      this.performDelete(op)\n    } else if (op.kind === 'modify') {\n      this.performModify(op)\n    } else if (op.kind === 'bundle') {\n      this.performBundle(op)\n    }\n  }\n\n  private rollbackOperation(op: Operation): void {\n    if (op.kind === 'create') {\n      this.rollbackCreate(op)\n    } else if (op.kind === 'delete') {\n      this.rollbackDelete(op)\n    } else if (op.kind === 'modify') {\n      this.rollbackModify(op)\n    } else if (op.kind === 'bundle') {\n      this.rollbackBundle(op)\n    }\n  }\n\n  private performCreate(op: CreateOp): void {\n    if (op.elType === 'point') {\n      const { x, y, attr } = op.payload\n      const pt = this.ensurePoint({ x, y }, attr)\n      if (!pt) return\n      op._id = pt.id\n      // Force board update to ensure point is created immediately\n      this.board.update()\n      return\n    }\n\n    if (op.elType === 'segment' || op.elType === 'line') {\n      const { p1, p2, attr } = op.payload\n      const a = this.getPointByIdOrNear(op.pointIds?.[0], p1) || this.ensurePoint(p1, attr)\n      const b = this.getPointByIdOrNear(op.pointIds?.[1], p2) || this.ensurePoint(p2, attr)\n\n      // If either isn't a real JSXGraph point, fall back to coordinate parents\n      const useCoords = !(this.isJXGPoint(a) && this.isJXGPoint(b))\n      const parents = useCoords ? [[p1.x, p1.y], [p2.x, p2.y]] : [a, b]\n\n      try {\n        const el = this.board.create(op.elType, parents as any, attr)\n        op._id = (el as any).id\n        // capture actual point ids (works for both segment & line)\n        const pA: any = (el as any).point1 || (el as any).A || (el as any).points?.[0]\n        const pB: any = (el as any).point2 || (el as any).B || (el as any).points?.[1]\n        if (this.isJXGPoint(pA) && this.isJXGPoint(pB)) {\n          op.pointIds = [pA.id, pB.id]\n          // Attach tracking to the endpoint points if they don't have it yet\n          this.attachPointTracking(pA)\n          this.attachPointTracking(pB)\n        }\n        // Attach shape tracking to the element itself\n        this.attachShapeTracking(el)\n        // Force board update to ensure object is created immediately\n        this.board.update()\n      } catch (e) {\n        console.error(`Failed to create ${op.elType}:`, e, { parents })\n      }\n      return\n    }\n\n    if (op.elType === 'circle') {\n      const { center, on, attr } = op.payload\n      const c = this.getPointByIdOrNear(op.pointIds?.[0], center) || this.ensurePoint(center, attr)\n      const p = this.getPointByIdOrNear(op.pointIds?.[1], on) || this.ensurePoint(on, attr)\n\n      const useCoords = !(this.isJXGPoint(c) && this.isJXGPoint(p))\n      const parents = useCoords ? [[center.x, center.y], [on.x, on.y]] : [c, p]\n\n      try {\n        const el = this.board.create('circle', parents as any, attr)\n        op._id = (el as any).id\n        const pc: any = (el as any).center || (el as any).points?.[0]\n        const pp: any = (el as any).point2 || (el as any).points?.[1]\n        if (this.isJXGPoint(pc) && this.isJXGPoint(pp)) {\n          op.pointIds = [pc.id, pp.id]\n          // Attach tracking to the center and on-point if they don't have it yet\n          this.attachPointTracking(pc)\n          this.attachPointTracking(pp)\n        }\n        // Attach shape tracking to the circle element itself\n        this.attachShapeTracking(el)\n        // Force board update to ensure object is created immediately\n        this.board.update()\n      } catch (e) {\n        console.error('Failed to create circle:', e, { parents })\n      }\n      return\n    }\n  }\n\n  private rollbackCreate(op: CreateOp): void {\n    if (!op._id) return\n    \n    const obj = (this.board.objects as any)[op._id]\n    if (obj) {\n      try {\n        this.board.removeObject(obj as JXG.GeometryElement)\n      } catch (error) {\n        console.error('Failed to remove object:', error, op._id)\n      }\n    } else {\n      // Try to find and remove by matching definition as fallback\n      this.removeByMatchingDefinition({\n        kind: 'delete',\n        elType: op.elType,\n        payload: op.payload,\n        _id: op._id,\n        pointIds: op.pointIds || []\n      })\n    }\n    \n    // Remove associated points if they're not used elsewhere\n    if (op.pointIds && (op.elType === 'segment' || op.elType === 'line' || op.elType === 'circle')) {\n      op.pointIds.forEach((pointId: string) => {\n        const pointObj = (this.board.objects as any)[pointId]\n        if (pointObj && !this.isPointUsedElsewhere(pointId, pointObj)) {\n          try {\n            this.board.removeObject(pointObj as JXG.GeometryElement)\n          } catch (error) {\n            console.error('Failed to remove point:', error, pointId)\n          }\n        }\n      })\n    }\n  }\n\n  private performDelete(op: DeleteOp): void {\n    if (op._id) {\n      const target = (this.board.objects as any)[op._id]\n      if (target) {\n        this.board.removeObject(target as JXG.GeometryElement)\n        // Force board update to ensure object is removed immediately\n        this.board.update()\n      }\n    } else {\n      // If _id is missing, try to find and remove by matching defining points and attributes\n      this.removeByMatchingDefinition(op)\n      // Force board update after removing by matching\n      this.board.update()\n    }\n    \n    // Remove associated points if they're not used elsewhere\n    if (op.pointIds && (op.elType === 'segment' || op.elType === 'line' || op.elType === 'circle')) {\n      op.pointIds.forEach((pointId: string) => {\n        const pointObj = (this.board.objects as any)[pointId]\n        if (pointObj && !this.isPointUsedElsewhere(pointId, pointObj)) {\n          this.board.removeObject(pointObj as JXG.GeometryElement)\n        }\n      })\n      // Force board update after removing points\n      this.board.update()\n    }\n  }\n\n  private removeByMatchingDefinition(op: DeleteOp): void {\n    const objects = Object.values(this.board.objects) as any[]\n    \n    for (const obj of objects) {\n      if (obj.elType !== op.elType) continue\n      \n      let matches = false\n      \n      if (op.elType === 'point') {\n        const { x, y } = op.payload\n        matches = Math.abs(obj.X() - x) < this.EPS && Math.abs(obj.Y() - y) < this.EPS\n      } else if (op.elType === 'segment' || op.elType === 'line') {\n        const { p1, p2 } = op.payload\n        const a = obj.point1 || obj.A || obj.points?.[0]\n        const b = obj.point2 || obj.B || obj.points?.[1]\n        if (a && b) {\n          matches = Math.abs(a.X() - p1.x) < this.EPS && Math.abs(a.Y() - p1.y) < this.EPS &&\n                   Math.abs(b.X() - p2.x) < this.EPS && Math.abs(b.Y() - p2.y) < this.EPS\n        }\n      } else if (op.elType === 'circle') {\n        const { center, on } = op.payload\n        const c = obj.center || obj.midpoint || obj.points?.[0]\n        const p = obj.point2 || obj.points?.[1]\n        if (c) {\n          const centerMatches = Math.abs(c.X() - center.x) < this.EPS && Math.abs(c.Y() - center.y) < this.EPS\n          if (p) {\n            matches = centerMatches && Math.abs(p.X() - on.x) < this.EPS && Math.abs(p.Y() - on.y) < this.EPS\n          } else {\n            // For circles defined by center and radius\n            const R = (typeof obj.R === 'function' ? obj.R() : obj.radius) ?? 1\n            const expectedRadius = Math.hypot(on.x - center.x, on.y - center.y)\n            matches = centerMatches && Math.abs(R - expectedRadius) < this.EPS\n          }\n        }\n      }\n      \n      if (matches) {\n        this.board.removeObject(obj as JXG.GeometryElement)\n        break\n      }\n    }\n  }\n\n  private rollbackDelete(op: DeleteOp): void {\n    if (op.elType === 'point') {\n      const { x, y, attr } = op.payload\n      const pt = this.ensurePoint({ x, y }, attr)\n      if (!pt) return\n      op._id = pt.id\n      // Force board update to ensure point is created immediately\n      this.board.update()\n      return\n    }\n\n    if (op.elType === 'segment' || op.elType === 'line') {\n      const { p1, p2, attr } = op.payload\n      const a = this.getPointByIdOrNear(op.pointIds?.[0], p1) || this.ensurePoint(p1, attr)\n      const b = this.getPointByIdOrNear(op.pointIds?.[1], p2) || this.ensurePoint(p2, attr)\n      \n      const useCoords = !(this.isJXGPoint(a) && this.isJXGPoint(b))\n      const parents = useCoords ? [[p1.x, p1.y], [p2.x, p2.y]] : [a, b]\n      \n      try {\n        const el = this.board.create(op.elType, parents as any, attr)\n        op._id = (el as any).id\n        const pA: any = (el as any).point1 || (el as any).A || (el as any).points?.[0]\n        const pB: any = (el as any).point2 || (el as any).B || (el as any).points?.[1]\n        if (this.isJXGPoint(pA) && this.isJXGPoint(pB)) {\n          op.pointIds = [pA.id, pB.id]\n        }\n        // Attach shape tracking to the recreated element\n        this.attachShapeTracking(el)\n        // Force board update to ensure object is created immediately\n        this.board.update()\n      } catch (e) {\n        console.error(`Failed to recreate ${op.elType}:`, e, { parents })\n      }\n      return\n    }\n\n    if (op.elType === 'circle') {\n      const { center, on, attr } = op.payload\n      const c = this.getPointByIdOrNear(op.pointIds?.[0], center) || this.ensurePoint(center, attr)\n      const p = this.getPointByIdOrNear(op.pointIds?.[1], on) || this.ensurePoint(on, attr)\n\n      const useCoords = !(this.isJXGPoint(c) && this.isJXGPoint(p))\n      const parents = useCoords ? [[center.x, center.y], [on.x, on.y]] : [c, p]\n\n      try {\n        const el = this.board.create('circle', parents as any, attr)\n        op._id = (el as any).id\n        const pc: any = (el as any).center || (el as any).points?.[0]\n        const pp: any = (el as any).point2 || (el as any).points?.[1]\n        if (this.isJXGPoint(pc) && this.isJXGPoint(pp)) {\n          op.pointIds = [pc.id, pp.id]\n        }\n        // Attach shape tracking to the recreated circle element\n        this.attachShapeTracking(el)\n        // Force board update to ensure object is created immediately\n        this.board.update()\n      } catch (e) {\n        console.error('Failed to recreate circle:', e, { parents })\n      }\n      return\n    }\n  }\n\n  private performModify(op: ModifyOp): void {\n    const pointObj = (this.board.objects as any)[op.pointId]\n    if (pointObj) {\n      // Use moveTo instead of setPosition to avoid draggable function issues\n      try {\n        pointObj.moveTo([op.after.x, op.after.y])\n      } catch (e) {\n        // Fallback to direct coordinate setting\n        pointObj.coords.setCoordinates(JXG.COORDS_BY_USER, [op.after.x, op.after.y])\n        this.board.update()\n      }\n      this.setPointName(pointObj, op.after.name)\n    }\n  }\n\n  private rollbackModify(op: ModifyOp): void {\n    const pointObj = (this.board.objects as any)[op.pointId]\n    if (pointObj) {\n      // Use moveTo instead of setPosition to avoid draggable function issues\n      try {\n        pointObj.moveTo([op.before.x, op.before.y])\n      } catch (e) {\n        // Fallback to direct coordinate setting\n        pointObj.coords.setCoordinates(JXG.COORDS_BY_USER, [op.before.x, op.before.y])\n        this.board.update()\n      }\n      this.setPointName(pointObj, op.before.name)\n    }\n  }\n\n  private performBundle(op: BundleOp): void {\n    // Execute operations in forward order\n    for (const subOp of op.ops) {\n      if (subOp) {\n        try {\n          // Create a fresh copy of the operation to avoid stale IDs\n          const freshOp = structuredClone(subOp)\n          // Keep IDs intact - don't delete them\n          this.performOperation(freshOp)\n          // Write back the realized IDs to the original operation\n          if (freshOp.kind === 'create' || freshOp.kind === 'delete') {\n            const freshOpTyped = freshOp as CreateOp | DeleteOp\n            const subOpTyped = subOp as CreateOp | DeleteOp\n            if (freshOpTyped._id !== undefined) {\n              subOpTyped._id = freshOpTyped._id\n            }\n            if (freshOpTyped.pointIds !== undefined) {\n              subOpTyped.pointIds = freshOpTyped.pointIds\n            }\n          }\n        } catch (error) {\n          console.error('Error executing bundled operation:', error, subOp)\n          // Continue with other operations even if one fails\n        }\n      }\n    }\n    // Force board update after all bundle operations\n    this.board.update()\n  }\n\n  private rollbackBundle(op: BundleOp): void {\n    // Rollback operations in reverse order\n    for (let i = op.ops.length - 1; i >= 0; i--) {\n      const subOp = op.ops[i]\n      if (subOp) {\n        try {\n          // Create a fresh copy of the operation to avoid stale IDs\n          const freshOp = structuredClone(subOp)\n          // Keep IDs intact - don't delete them\n          this.rollbackOperation(freshOp)\n          // Write back the realized IDs to the original operation\n          if (freshOp.kind === 'create' || freshOp.kind === 'delete') {\n            const freshOpTyped = freshOp as CreateOp | DeleteOp\n            const subOpTyped = subOp as CreateOp | DeleteOp\n            if (freshOpTyped._id !== undefined) {\n              subOpTyped._id = freshOpTyped._id\n            }\n            if (freshOpTyped.pointIds !== undefined) {\n              subOpTyped.pointIds = freshOpTyped.pointIds\n            }\n          }\n        } catch (error) {\n          console.error('Error rolling back bundled operation:', error, subOp)\n          // Continue with other operations even if one fails\n        }\n      }\n    }\n    // Force board update after all bundle rollback operations\n    this.board.update()\n  }\n\n  private setPointName(pointObj: any, name: string): void {\n    const trimmed = (name || '').trim()\n    const pretty = this.toSubscript(trimmed)\n    pointObj.setAttribute({ name: pretty, withLabel: !!trimmed })\n    ;(pointObj as any)._rawName = trimmed\n  }\n\n  private toSubscript(name: string): string {\n    const map: Record<string, string> = { \n      '0': '₀', '1': '₁', '2': '₂', '3': '₃', '4': '₄', \n      '5': '₅', '6': '₆', '7': '₇', '8': '₈', '9': '₉' \n    }\n    return name.replace(/_(\\d+)/g, (_, d) => d.split('').map((ch: string) => map[ch] ?? ch).join(''))\n  }\n\n  private isPointUsedElsewhere(pointId: string, pointObj: any): boolean {\n    return Object.values(this.board.objects).some((otherObj: any) => {\n      if (otherObj === pointObj || otherObj.id === pointId) return false\n      if (otherObj.point1?.id === pointId || otherObj.point2?.id === pointId) return true\n      if (otherObj.center?.id === pointId) return true\n      if (otherObj.points && Array.isArray(otherObj.points)) {\n        return otherObj.points.some((p: any) => p?.id === pointId)\n      }\n      return false\n    })\n  }\n\n  // Helper methods for creating operations\n  public createPointOperation(x: number, y: number, attr: any = { name: '', size: 2, strokeColor: '#444', fillColor: '#666' }): CreateOp {\n    return {\n      kind: 'create',\n      elType: 'point',\n      payload: { x, y, attr }\n    }\n  }\n\n  public createSegmentOperation(p1: { x: number; y: number }, p2: { x: number; y: number }, attr: any): CreateOp {\n    return {\n      kind: 'create',\n      elType: 'segment',\n      payload: { p1, p2, attr }\n    }\n  }\n\n  public createLineOperation(p1: { x: number; y: number }, p2: { x: number; y: number }, attr: any): CreateOp {\n    return {\n      kind: 'create',\n      elType: 'line',\n      payload: { p1, p2, attr }\n    }\n  }\n\n  public createCircleOperation(center: { x: number; y: number }, on: { x: number; y: number }, attr: any): CreateOp {\n    return {\n      kind: 'create',\n      elType: 'circle',\n      payload: { center, on, attr }\n    }\n  }\n\n  public createDeleteOperation(obj: any): DeleteOp | null {\n    try {\n      const attr = this.getCommonAttr(obj)\n      if (obj.elType === 'point') {\n        return {\n          kind: 'delete',\n          elType: 'point',\n          payload: { x: obj.X(), y: obj.Y(), attr },\n          _id: obj.id\n        }\n      }\n      if (obj.elType === 'segment' || obj.elType === 'line') {\n        const a: any = obj.point1 || obj.A || obj.points?.[0]\n        const b: any = obj.point2 || obj.B || obj.points?.[1]\n        if (!a || !b) return null\n        return {\n          kind: 'delete',\n          elType: obj.elType,\n          payload: { p1: { x: a.X(), y: a.Y() }, p2: { x: b.X(), y: b.Y() }, attr },\n          _id: obj.id,\n          pointIds: [a.id, b.id]\n        }\n      }\n      if (obj.elType === 'circle') {\n        const c: any = obj.center || obj.midpoint || obj.points?.[0]\n        const p: any = obj.point2 || obj.points?.[1]\n        const center = c ? { x: c.X(), y: c.Y() } : { x: obj.center?.X?.() ?? 0, y: obj.center?.Y?.() ?? 0 }\n        let on\n        if (p) {\n          on = { x: p.X(), y: p.Y() }\n        } else {\n          const R = (typeof obj.R === 'function' ? obj.R() : obj.radius) ?? 1\n          on = { x: center.x + R, y: center.y }\n        }\n        return {\n          kind: 'delete',\n          elType: 'circle',\n          payload: { center, on, attr },\n          _id: obj.id,\n          pointIds: c && p ? [c.id, p.id] : []\n        }\n      }\n    } catch {\n      return null\n    }\n    return null\n  }\n\n  private getCommonAttr(o: any): any {\n    return {\n      name: o?._rawName ?? '',\n      withLabel: !!(o?.visProp?.withlabel || o?.visProp?.withLabel),\n      fixed: !!o?.visProp?.fixed,\n      size: o?.visProp?.size,\n      strokeColor: o?.visProp?.strokecolor ?? o?.visProp?.strokeColor,\n      strokeWidth: o?.visProp?.strokewidth ?? o?.visProp?.strokeWidth,\n      fillColor: o?.visProp?.fillcolor ?? o?.visProp?.fillColor,\n      dash: o?.visProp?.dash\n    }\n  }\n\n  // Helper methods for UI integration\n  public fromBoardDeleteUnderMouse(e: any): DeleteOp | null {\n    const under = this.board.getAllObjectsUnderMouse(e)\n    const o: any = under.find((x: any) => !x?.visProp?.fixed)\n    return o ? this.createDeleteOperation(o) : null\n  }\n\n  public createModifyOperation(pointId: string, before: { x: number; y: number; name: string }, after: { x: number; y: number; name: string }): ModifyOp {\n    return {\n      kind: 'modify',\n      pointId,\n      before,\n      after\n    }\n  }\n}\n"],"names":[],"mappings":"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","ignoreList":[2,3,4,5,6]}