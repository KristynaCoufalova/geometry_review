(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,30598,e=>{"use strict";e.s(["default",()=>y]);var t=e.i(57421),r=e.i(83770),n=e.i(39324),o=e.i(89723),l=e.i(38494),i=e.i(65821),s=e.i(18962),a=e.i(19722),u=e.i(53039),c=e.i(89124),d=e.i(690),g=e.i(88387),x=e.i(56162),b=e.i(39560),f=e.i(79562);function p(e,t){return Math.hypot(e.x-t.x,e.y-t.y)}function h(e){return{x:e.X(),y:e.Y()}}function m(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.03,n=h(t.point1),o=h(t.point2),l=o.y-n.y,i=n.x-o.x,s=-(l*n.x+i*n.y);return Math.abs(l*e.x+i*e.y+s)/Math.hypot(l,i)<r}function v(e,t){let[r,n]=t,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.03,l=[h(e.point1),h(e.point2)],i=(e,t)=>p(e,t);return i(l[0],h(r))<o&&i(l[1],h(n))<o||i(l[1],h(r))<o&&i(l[0],h(n))<o}function y(){let e=(0,r.useRef)(null),y=(0,r.useRef)(null),[j,w]=(0,r.useState)("mouse"),[k,C]=(0,r.useState)([]),[N,z]=(0,r.useState)(""),[S,A]=(0,r.useState)(null),[E,P]=(0,r.useState)([]),[B,M]=(0,r.useState)(!1),[O,R]=(0,r.useState)(!1),[T,U]=(0,r.useState)(!1),[_,K]=(0,r.useState)({x:5,y:4,rotation:0,length:6}),[L,F]=(0,r.useState)({x:7,y:4,rotation:0,size:3}),[W,q]=(0,r.useState)({x:6,y:3,rotation:0,size:3}),[D,G]=(0,r.useState)(null),[X,Z]=(0,r.useState)(!1),[J,V]=(0,r.useState)(!1),[I,Y]=(0,r.useState)(null),H=(0,r.useRef)(j),Q=(0,r.useRef)(k),$=(0,r.useRef)(X),ee=(0,r.useRef)(J),et=(0,r.useRef)(null),er=(0,r.useRef)({pt:null,wasFixed:!1}),en=(0,r.useRef)(null);(0,r.useEffect)(()=>{H.current=j},[j]),(0,r.useEffect)(()=>{Q.current=k},[k]),(0,r.useEffect)(()=>{$.current=X},[X]),(0,r.useEffect)(()=>{ee.current=J},[J]);let eo=(0,r.useRef)(null);function el(e){(null==e?void 0:e.id)&&P(t=>[...t,e.id])}function ei(e,t){let r=e.getUsrCoordsOfMouse(t);return{x:r[0],y:r[1]}}let es=(0,r.useCallback)((e,t)=>{let r=(t||"").trim(),n=function(e){let t={0:"₀",1:"₁",2:"₂",3:"₃",4:"₄",5:"₅",6:"₆",7:"₇",8:"₈",9:"₉"};return e.replace(/_(\d+)/g,(e,r)=>r.split("").map(e=>{var r;return null!=(r=t[e])?r:e}).join(""))}(r);e.setAttribute({name:n,withLabel:!!r}),e._rawName=r},[]);function ea(e,t,r){for(let o in e.objects){let l=e.objects[o];if("point"===l.elType&&l.id!==r){var n;if((null!=(n=l._rawName)?n:"")===t)return!0}}return!1}function eu(e,t){return e.getAllObjectsUnderMouse(t).find(e=>"point"===e.elType&&!e.visProp.fixed)||null}let ec=(0,r.useCallback)((e,t)=>{let r={name:"",size:3,strokeColor:"#e11d48",fillColor:"#e11d48",label:{offset:[5,10]}},{q:n}=eo.current;if(m(t,n,.15)){let o=e.create("glider",[t.x,t.y,n],r);return o._rawName="",el(o),o}let o=e.create("point",[t.x,t.y],{...r,size:2,strokeColor:"#444",fillColor:"#666"});return o._rawName="",el(o),o},[]),ed=(0,r.useCallback)((e,t)=>{var r;if($.current||ee.current)return;let n=null==(r=t.originalEvent)?void 0:r.target;if(n&&(n.closest(".group")||n.classList.contains("group")))return;let o=ei(e,t);switch(H.current){case"mouse":e.getAllObjectsUnderMouse(t).find(e=>"point"===e.elType&&!e.visProp.fixed)?(t.originalEvent&&(t.originalEvent.preventDefault(),t.originalEvent.stopPropagation()),z("Bod vybrán")):z("");break;case"point":ec(e,o),z("Bod vytvořen");break;case"segment":{let r=eu(e,t);r||(r=ec(e,o)),C(t=>{let n=[...t,r];if(1===n.length)z("Klikněte na druhý bod");else if(2===n.length)return el(e.create("segment",[n[0],n[1]],{strokeColor:"#2563eb",strokeWidth:2})),z("Úsečka vytvořena"),[];return n});break}case"line":{let r=eu(e,t);r||(r=ec(e,o)),C(t=>{let n=[...t,r];if(1===n.length)z("Klikněte na druhý bod");else if(2===n.length)return el(e.create("line",[n[0],n[1]],{strokeColor:"#059669",strokeWidth:1,dash:1})),z("Přímka vytvořena"),[];return n});break}case"circle":{let r=eu(e,t);r||(r=ec(e,o)),C(t=>{let n=[...t,r];if(1===n.length)z("Klikněte na bod na kružnici");else if(2===n.length)return el(e.create("circle",[n[0],n[1]],{strokeColor:"#dc2626",strokeWidth:2})),z("Kružnice vytvořena"),[];return n});break}case"rubber":{let r=e.getAllObjectsUnderMouse(t).find(e=>{var t;return!(null==(t=e.visProp)?void 0:t.fixed)&&"S"!==e.name&&"C"!==e.name});r&&(e.removeObject(r),z("Objekt smazán"))}}},[ec]);return(0,r.useEffect)(()=>{et.current=ed},[ed]),(0,r.useEffect)(()=>{let e=e=>{"n"!==e.key&&"N"!==e.key||$.current||V(e=>!e)};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[]),(0,r.useEffect)(()=>{if(!y.current)return;let t=n.default.JSXGraph.initBoard(y.current,{boundingbox:[-1,8,11,-1],axis:!1,showNavigation:!1,showCopyright:!1,grid:!0,pan:{enabled:!1},zoom:!1,keepaspectratio:!0});e.current=t;let r=t.create("line",[[0,7],[10,7]],{strokeColor:"#000",strokeWidth:2,name:"q",withLabel:!0,fixed:!0,label:{position:"rt",offset:[10,0]}});return eo.current={q:r,S:t.create("point",[5,5],{name:"S",size:3,strokeColor:"#000",fillColor:"#000",fixed:!0,label:{offset:[5,10]}}),C:t.create("point",[4.5,3],{name:"C",size:3,strokeColor:"#000",fillColor:"#000",fixed:!0,label:{offset:[5,-15]}})},()=>{try{n.default.JSXGraph.freeBoard(t)}catch(e){}e.current=null,eo.current=null}},[]),(0,r.useEffect)(()=>{let t=e.current;if(!t)return;t.off("down"),t.off("up"),t.off("dblclick");let r=e=>{if($.current)return;if(!ee.current){et.current&&et.current(t,e);return}let r=t.getAllObjectsUnderMouse(e).find(e=>"point"===e.elType)||null;if(!r)return;let n=!!r.visProp.fixed;r.setAttribute({fixed:!0}),er.current={pt:r,wasFixed:n},en.current=ei(t,e),e.originalEvent&&(e.originalEvent.stopPropagation(),e.originalEvent.preventDefault())},n=e=>{let r=er.current;if(!r.pt)return;let n=ei(t,e),o=en.current||n;if(.12>=Math.hypot(n.x-o.x,n.y-o.y))return void((e,r)=>{var n;let o=e._rawName||"",l=(null!=(n=window.prompt("Název bodu (např. A, B, C, A_1, A_2):",o))?n:"").trim();if(l&&ea(t,l,e.id)){let r=2;for(;ea(t,"".concat(l,"_").concat(r),e.id);)r++;l="".concat(l,"_").concat(r)}es(e,l);let i=er.current;e.setAttribute({fixed:i.wasFixed}),(null==r?void 0:r.originalEvent)&&(r.originalEvent.stopPropagation(),r.originalEvent.preventDefault()),t.update(),l||V(!1),er.current={pt:null,wasFixed:!1},en.current=null})(r.pt,e);let{pt:l}=r;l.setAttribute({fixed:r.wasFixed}),er.current={pt:null,wasFixed:!1},en.current=null};return t.on("down",r),t.on("up",n),()=>{try{t.off("down",r),t.off("up",n)}catch(e){}}},[J,es]),(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 p-6",children:(0,t.jsx)("div",{className:"max-w-6xl mx-auto",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Úloha 9: Konstrukce trojúhelníku"}),(0,t.jsx)("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4 mb-4",children:(0,t.jsx)("p",{className:"text-gray-700",children:"Sestrojte rovnoramenný trojúhelník ABC. Bod C je vrchol, S je střed ramene, AB leží na přímce q."})}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2 mb-4 p-4 bg-gray-100 rounded-lg",children:[(0,t.jsxs)("button",{onClick:()=>w("mouse"),className:"px-3 py-2 rounded flex items-center gap-2 ".concat("mouse"===j?"bg-gray-600 text-white":"bg-white text-gray-700 hover:bg-gray-200"),children:[(0,t.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,t.jsx)("path",{d:"M3 3l7.07 16.97 2.51-7.39 7.39-2.51L3 3z"}),(0,t.jsx)("path",{d:"M13 13l6 6"})]}),"Myš"]}),(0,t.jsxs)("button",{onClick:()=>w("point"),className:"px-3 py-2 rounded flex items-center gap-2 ".concat("point"===j?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-200"),children:[(0,t.jsx)(i.Circle,{size:18})," Bod"]}),(0,t.jsxs)("button",{onClick:()=>w("segment"),className:"px-3 py-2 rounded flex items-center gap-2 ".concat("segment"===j?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-200"),children:[(0,t.jsx)(s.Pencil,{size:18})," Úsečka"]}),(0,t.jsxs)("button",{onClick:()=>w("line"),className:"px-3 py-2 rounded flex items-center gap-2 ".concat("line"===j?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-200"),children:[(0,t.jsx)(s.Pencil,{size:18})," Přímka"]}),(0,t.jsxs)("button",{onClick:()=>w("circle"),className:"px-3 py-2 rounded flex items-center gap-2 ".concat("circle"===j?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-200"),children:[(0,t.jsx)(i.Circle,{size:18})," Kružnice"]}),(0,t.jsxs)("button",{onClick:()=>w("rubber"),className:"px-3 py-2 rounded flex items-center gap-2 ".concat("rubber"===j?"bg-red-600 text-white":"bg-white text-gray-700 hover:bg-gray-200"),children:[(0,t.jsx)(u.Eraser,{size:18})," Guma"]}),(0,t.jsx)("button",{onClick:()=>V(e=>!e),className:"px-3 py-2 rounded flex items-center gap-2 ".concat(J?"bg-teal-600 text-white":"bg-white text-gray-700 hover:bg-gray-200"),title:"Přejmenovat bod (klikněte na bod)",children:"✎ Název bodu"}),(0,t.jsx)("div",{className:"border-l-2 border-gray-300 mx-2"}),(0,t.jsxs)("button",{onClick:function(){M(!B),B?"ruler"===D&&G(null):(G("ruler"),w("mouse"))},className:"px-3 py-2 rounded flex items-center gap-2 ".concat(B?"bg-yellow-600 text-white":"bg-white text-gray-700 hover:bg-gray-200"),children:[(0,t.jsx)(c.Ruler,{size:18})," Pravítko"]}),(0,t.jsxs)("button",{onClick:function(){R(!O),O?"triangle"===D&&G(null):(G("triangle"),w("mouse"))},className:"px-3 py-2 rounded flex items-center gap-2 ".concat(O?"bg-purple-600 text-white":"bg-white text-gray-700 hover:bg-gray-200"),children:[(0,t.jsx)(d.Triangle,{size:18})," Trojúhelník"]}),(0,t.jsxs)("button",{onClick:function(){U(!T),T?"protractor"===D&&G(null):(G("protractor"),w("mouse"))},className:"px-3 py-2 rounded flex items-center gap-2 ".concat(T?"bg-orange-600 text-white":"bg-white text-gray-700 hover:bg-gray-200"),children:[(0,t.jsx)(g.Gauge,{size:18})," Úhloměr"]}),(0,t.jsx)("div",{className:"flex-1"}),(0,t.jsxs)("button",{onClick:function(){let t=e.current;if(!t||0===E.length)return;let r=E[E.length-1],n=r?t.objects[r]:void 0;n&&t.removeObject(n),P(e=>e.slice(0,-1)),z("")},className:"px-3 py-2 rounded bg-gray-700 text-white hover:bg-gray-800 flex items-center gap-2",children:[(0,t.jsx)(a.RotateCcw,{size:18})," Zpět"]}),(0,t.jsxs)("button",{onClick:function(){let t=e.current;if(!t)return;let r=[];for(let e in t.objects){var n;let o=t.objects[e];(null==o||null==(n=o.visProp)?void 0:n.fixed)||"S"===o.name||"C"===o.name||"q"===o.name||r.push(o)}r.forEach(e=>t.removeObject(e)),C([]),z(""),A(null),P([])},className:"px-3 py-2 rounded bg-red-500 text-white hover:bg-red-600 flex items-center gap-2",children:[(0,t.jsx)(l.Trash2,{size:18})," Vymazat"]}),(0,t.jsxs)("button",{onClick:function(){if(!e.current)return;let t=function(){let t=e.current,{q:r,S:n,C:o}=eo.current,l=Object.values(t.objects).filter(e=>"point"===e.elType),i=e=>{var t,r;return null!=(r=null!=(t=null==e?void 0:e._rawName)?t:null==e?void 0:e.name)?r:""},s=l.find(e=>"A"===i(e)),a=l.find(e=>"B"===i(e));if(!s||!a)return{passed:!1,message:"Označte vrcholy A a B.",score:0};let u=m(h(s),r,.03),c=m(h(a),r,.03);if(!(u&&c))return{passed:!1,message:"A i B musí ležet na přímce q.",score:1};let d=.03>Math.abs(p(h(s),h(o))-p(h(a),h(o))),g=p(h(n),h(s)),x=p(h(n),h(a)),b=p(h(n),h(o)),f=.03>Math.abs(g-b),y=.03>Math.abs(x-b);if(!(d&&(f||y)))return{passed:!1,message:"Zkontrolujte: AC = BC a S je střed ramene.",score:2};let j=Object.values(t.objects).filter(e=>"segment"===e.elType),w=j.some(e=>v(e,[s,a])),k=j.some(e=>v(e,[s,o])),C=j.some(e=>v(e,[a,o]));return w&&k&&C?{passed:!0,message:"✅ Výborně! Podmínky splněny.",score:3}:{passed:!0,message:"Správně, ale chybí narýsované strany.",score:3}}();A({validation:t,timestamp:new Date().toISOString()}),z(t.message)},className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700 flex items-center gap-2",children:[(0,t.jsx)(o.Save,{size:18})," Uložit"]})]}),(0,t.jsxs)("div",{ref:y,id:"jxgbox",className:"w-full border-2 border-gray-300 rounded-lg bg-white jxgbox relative",style:{height:500,touchAction:"none"},children:[B&&(0,t.jsx)(x.default,{x:_.x,y:_.y,rotation:_.rotation,length:_.length,onPositionChange:(e,t,r,n)=>{K({x:e,y:t,rotation:r,length:n})},isActive:"ruler"===D,onActivate:()=>{G("ruler"),w("mouse")},onUiBusyChange:Z}),O&&(0,t.jsx)(b.default,{x:L.x,y:L.y,rotation:L.rotation,size:L.size,type:"45-45-90",onPositionChange:(e,t,r,n)=>{F({x:e,y:t,rotation:r,size:n})},isActive:"triangle"===D,onActivate:()=>{G("triangle"),w("mouse")},onUiBusyChange:Z}),T&&(0,t.jsx)(f.default,{x:W.x,y:W.y,rotation:W.rotation,size:W.size,onPositionChange:(e,t,r,n)=>{q({x:e,y:t,rotation:r,size:n})},isActive:"protractor"===D,onActivate:()=>{G("protractor"),w("mouse")},onUiBusyChange:Z})]}),(0,t.jsx)("div",{className:"mt-4 p-3 bg-blue-50 border-l-4 border-blue-500 rounded-lg",children:(0,t.jsxs)("p",{className:"text-blue-700 text-sm",children:[(0,t.jsx)("strong",{children:"Nápověda:"})," Modrý bod = přesun • Zelený bod = otočení • Oranžový bod = změna velikosti"]})}),N&&(0,t.jsx)("div",{className:"mt-4 p-4 rounded-lg ".concat(N.includes("✅")?"bg-green-50 border-l-4 border-green-500":"bg-yellow-50 border-l-4 border-yellow-500"),children:(0,t.jsx)("p",{className:"text-gray-800",children:N})})]})})})}},58864,e=>{e.n(e.i(30598))}]);