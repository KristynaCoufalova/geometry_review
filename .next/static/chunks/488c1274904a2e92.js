(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,48227,e=>{"use strict";e.s(["default",()=>i],48227);var t=e.i(83770);let r=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},n=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,t.forwardRef)((e,r)=>{let{color:l="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:a,className:c="",children:d,iconNode:u,...x}=e;return(0,t.createElement)("svg",{ref:r,...s,width:i,height:i,stroke:l,strokeWidth:a?24*Number(o)/Number(i):o,className:n("lucide",c),...!d&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(x)&&{"aria-hidden":"true"},...x},[...u.map(e=>{let[r,n]=e;return(0,t.createElement)(r,n)}),...Array.isArray(d)?d:[d]])}),i=(e,s)=>{let i=(0,t.forwardRef)((i,o)=>{let{className:a,...c}=i;return(0,t.createElement)(l,{ref:o,iconNode:s,className:n("lucide-".concat(r(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),a),...c})});return i.displayName=r(e),i}},66795,e=>{"use strict";e.s(["default",()=>f],66795);var t=e.i(57421),r=e.i(83770),n=e.i(39324),s=e.i(89723),l=e.i(38494),i=e.i(65821),o=e.i(18962),a=e.i(19722),c=e.i(53039),d=e.i(89124),u=e.i(690),x=e.i(88387),h=e.i(48227);let g=(0,h.default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]),b=(0,h.default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]),p=(0,h.default)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);var m=e.i(56162),j=e.i(39560),v=e.i(79562);function f(){let e=(0,r.useRef)(null),h=(0,r.useRef)(null),[f,y]=(0,r.useState)("mouse"),[k,w]=(0,r.useState)([]),[N,C]=(0,r.useState)(""),[z,S]=(0,r.useState)(null),[O,A]=(0,r.useState)([]),[M,R]=(0,r.useState)(!1),[P,K]=(0,r.useState)([]),[U,B]=(0,r.useState)(!1),[E,L]=(0,r.useState)(!1),[T,Z]=(0,r.useState)(!1),[W,G]=(0,r.useState)({x:5,y:4,rotation:0,length:6}),[I,J]=(0,r.useState)({x:7,y:4,rotation:0,size:3}),[V,D]=(0,r.useState)({x:6,y:3,rotation:0,size:3}),[H,F]=(0,r.useState)(null),[X,$]=(0,r.useState)(!1),_=(0,r.useRef)(f),q=(0,r.useRef)(k),Q=(0,r.useRef)(X),Y=(0,r.useRef)(null);function ee(e){(null==e?void 0:e.id)&&A(t=>[...t,e.id])}function et(e,t){return e.getAllObjectsUnderMouse(t).find(e=>"point"===e.elType&&!e.visProp.fixed)||null}(0,r.useEffect)(()=>{_.current=f},[f]),(0,r.useEffect)(()=>{q.current=k},[k]),(0,r.useEffect)(()=>{Q.current=X},[X]);let er=(0,r.useCallback)((e,t)=>{let r=e.create("point",[t.x,t.y],{name:"",size:2,strokeColor:"#444",fillColor:"#666"});return ee(r),r},[]),en=(0,r.useCallback)((e,t)=>{var r;if(Q.current)return;let n=null==(r=t.originalEvent)?void 0:r.target;if(n&&(n.closest(".group")||n.classList.contains("group")))return;let s=function(e,t){let r=e.getUsrCoordsOfMouse(t);return{x:r[0],y:r[1]}}(e,t);switch(_.current){case"mouse":C("");break;case"point":er(e,s),C("Bod vytvořen");break;case"segment":{let r=et(e,t);r||(r=er(e,s)),w(t=>{let n=[...t,r];if(1===n.length)C("Klikněte na druhý bod");else if(2===n.length)return ee(e.create("segment",[n[0],n[1]],{strokeColor:"#2563eb",strokeWidth:2})),C("Úsečka vytvořena"),[];return n});break}case"line":{let r=et(e,t);r||(r=er(e,s)),w(t=>{let n=[...t,r];if(1===n.length)C("Klikněte na druhý bod");else if(2===n.length)return ee(e.create("line",[n[0],n[1]],{strokeColor:"#059669",strokeWidth:1,dash:1})),C("Přímka vytvořena"),[];return n});break}case"circle":{let r=et(e,t);r||(r=er(e,s)),w(t=>{let n=[...t,r];if(1===n.length)C("Klikněte na bod na kružnici");else if(2===n.length)return ee(e.create("circle",[n[0],n[1]],{strokeColor:"#dc2626",strokeWidth:2})),C("Kružnice vytvořena"),[];return n});break}case"rubber":{let r=e.getAllObjectsUnderMouse(t).find(e=>{var t;return!(null==(t=e.visProp)?void 0:t.fixed)});r&&(e.removeObject(r),C("Objekt smazán"))}}},[er]);function es(){let t=e.current;if(!t)return;let r=[];for(let e in t.objects){var n;let s=t.objects[e];(null==s||null==(n=s.visProp)?void 0:n.fixed)||r.push(s)}r.forEach(e=>t.removeObject(e)),w([]),C(""),S(null),A([])}return(0,r.useEffect)(()=>{Y.current=en},[en]),(0,r.useEffect)(()=>{if(!h.current)return;let t=n.default.JSXGraph.initBoard(h.current,{boundingbox:[-1,8,11,-1],axis:!1,showNavigation:!1,showCopyright:!1,grid:!0,pan:{enabled:!1},zoom:!1,keepaspectratio:!0});return e.current=t,t.on("down",e=>{Y.current&&Y.current(t,e)}),()=>{try{n.default.JSXGraph.freeBoard(t)}catch(e){}e.current=null}},[]),(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 p-6",children:(0,t.jsx)("div",{className:"max-w-6xl mx-auto",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Obecné geometrické testování"}),(0,t.jsxs)("div",{className:"bg-green-50 border-l-4 border-green-500 p-4 mb-4",children:[(0,t.jsx)("p",{className:"text-gray-700",children:"Volné testovací pole pro geometrické konstrukce. Můžete používat všechny dostupné nástroje bez specifických požadavků."}),(0,t.jsx)("div",{className:"mt-2 flex items-center gap-2",children:(0,t.jsxs)("button",{onClick:()=>R(!M),className:"flex items-center gap-1 text-sm text-blue-600 hover:text-blue-800",children:[(0,t.jsx)(p,{size:14}),M?"Skrýt nápovědu":"Zobrazit nápovědu"]})})]}),M&&(0,t.jsxs)("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4 mb-4",children:[(0,t.jsx)("h3",{className:"font-semibold text-blue-800 mb-2",children:"Nápověda k nástrojům:"}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-4 text-sm text-blue-700",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium mb-1",children:"Základní nástroje:"}),(0,t.jsxs)("ul",{className:"space-y-1",children:[(0,t.jsxs)("li",{children:["• ",(0,t.jsx)("strong",{children:"Myš:"})," Interakce s objekty bez vytváření"]}),(0,t.jsxs)("li",{children:["• ",(0,t.jsx)("strong",{children:"Bod:"})," Vytvoření bodu kliknutím"]}),(0,t.jsxs)("li",{children:["• ",(0,t.jsx)("strong",{children:"Úsečka:"})," Klikněte na dva body"]}),(0,t.jsxs)("li",{children:["• ",(0,t.jsx)("strong",{children:"Přímka:"})," Klikněte na dva body"]}),(0,t.jsxs)("li",{children:["• ",(0,t.jsx)("strong",{children:"Kružnice:"})," Střed a bod na kružnici"]}),(0,t.jsxs)("li",{children:["• ",(0,t.jsx)("strong",{children:"Guma:"})," Smazání objektu"]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium mb-1",children:"Fyzické nástroje:"}),(0,t.jsxs)("ul",{className:"space-y-1",children:[(0,t.jsxs)("li",{children:["• ",(0,t.jsx)("strong",{children:"Pravítko:"})," Měření vzdáleností"]}),(0,t.jsxs)("li",{children:["• ",(0,t.jsx)("strong",{children:"Trojúhelník:"})," Rýsování úhlů"]}),(0,t.jsxs)("li",{children:["• ",(0,t.jsx)("strong",{children:"Úhloměr:"})," Měření úhlů"]}),(0,t.jsxs)("li",{children:["• ",(0,t.jsx)("strong",{children:"Modrý bod:"})," Přesun nástroje"]}),(0,t.jsxs)("li",{children:["• ",(0,t.jsx)("strong",{children:"Zelený bod:"})," Otočení nástroje"]}),(0,t.jsxs)("li",{children:["• ",(0,t.jsx)("strong",{children:"Oranžový bod:"})," Změna velikosti"]})]})]})]})]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2 mb-4 p-4 bg-gray-100 rounded-lg",children:[(0,t.jsxs)("button",{onClick:()=>y("mouse"),className:"px-3 py-2 rounded flex items-center gap-2 ".concat("mouse"===f?"bg-gray-600 text-white":"bg-white text-gray-700 hover:bg-gray-200"),children:[(0,t.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,t.jsx)("path",{d:"M3 3l7.07 16.97 2.51-7.39 7.39-2.51L3 3z"}),(0,t.jsx)("path",{d:"M13 13l6 6"})]}),"Myš"]}),(0,t.jsxs)("button",{onClick:()=>y("point"),className:"px-3 py-2 rounded flex items-center gap-2 ".concat("point"===f?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-200"),children:[(0,t.jsx)(i.Circle,{size:18})," Bod"]}),(0,t.jsxs)("button",{onClick:()=>y("segment"),className:"px-3 py-2 rounded flex items-center gap-2 ".concat("segment"===f?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-200"),children:[(0,t.jsx)(o.Pencil,{size:18})," Úsečka"]}),(0,t.jsxs)("button",{onClick:()=>y("line"),className:"px-3 py-2 rounded flex items-center gap-2 ".concat("line"===f?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-200"),children:[(0,t.jsx)(o.Pencil,{size:18})," Přímka"]}),(0,t.jsxs)("button",{onClick:()=>y("circle"),className:"px-3 py-2 rounded flex items-center gap-2 ".concat("circle"===f?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-200"),children:[(0,t.jsx)(i.Circle,{size:18})," Kružnice"]}),(0,t.jsxs)("button",{onClick:()=>y("rubber"),className:"px-3 py-2 rounded flex items-center gap-2 ".concat("rubber"===f?"bg-red-600 text-white":"bg-white text-gray-700 hover:bg-gray-200"),children:[(0,t.jsx)(c.Eraser,{size:18})," Guma"]}),(0,t.jsx)("div",{className:"border-l-2 border-gray-300 mx-2"}),(0,t.jsxs)("button",{onClick:function(){B(!U),U?"ruler"===H&&F(null):F("ruler")},className:"px-3 py-2 rounded flex items-center gap-2 ".concat(U?"bg-yellow-600 text-white":"bg-white text-gray-700 hover:bg-gray-200"),children:[(0,t.jsx)(d.Ruler,{size:18})," Pravítko"]}),(0,t.jsxs)("button",{onClick:function(){L(!E),E?"triangle"===H&&F(null):F("triangle")},className:"px-3 py-2 rounded flex items-center gap-2 ".concat(E?"bg-purple-600 text-white":"bg-white text-gray-700 hover:bg-gray-200"),children:[(0,t.jsx)(u.Triangle,{size:18})," Trojúhelník"]}),(0,t.jsxs)("button",{onClick:function(){Z(!T),T?"protractor"===H&&F(null):F("protractor")},className:"px-3 py-2 rounded flex items-center gap-2 ".concat(T?"bg-orange-600 text-white":"bg-white text-gray-700 hover:bg-gray-200"),children:[(0,t.jsx)(x.Gauge,{size:18})," Úhloměr"]}),(0,t.jsx)("div",{className:"flex-1"}),(0,t.jsxs)("button",{onClick:function(){let t=e.current;if(!t||0===O.length)return;let r=O[O.length-1],n=r?t.objects[r]:void 0;n&&t.removeObject(n),A(e=>e.slice(0,-1)),C("")},className:"px-3 py-2 rounded bg-gray-700 text-white hover:bg-gray-800 flex items-center gap-2",children:[(0,t.jsx)(a.RotateCcw,{size:18})," Zpět"]}),(0,t.jsxs)("button",{onClick:es,className:"px-3 py-2 rounded bg-red-500 text-white hover:bg-red-600 flex items-center gap-2",children:[(0,t.jsx)(l.Trash2,{size:18})," Vymazat"]}),(0,t.jsxs)("button",{onClick:function(){if(!e.current)return;let t={timestamp:new Date().toISOString(),objects:Object.values(e.current.objects).map(e=>({id:e.id,type:e.elType,name:e.name,properties:e.visProp})),createdStack:[...O]};S(t),K(e=>[...e,t]),C("Konstrukce uložena")},className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700 flex items-center gap-2",children:[(0,t.jsx)(s.Save,{size:18})," Uložit"]}),(0,t.jsxs)("button",{onClick:function(){if(!z)return;let e=new Blob([JSON.stringify(z,null,2)],{type:"application/json"}),t=URL.createObjectURL(e),r=document.createElement("a");r.href=t,r.download="construction_".concat(new Date().toISOString().split("T")[0],".json"),r.click(),URL.revokeObjectURL(t),C("Konstrukce exportována")},disabled:!z,className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[(0,t.jsx)(g,{size:18})," Export"]}),(0,t.jsxs)("label",{className:"px-3 py-2 rounded bg-purple-600 text-white hover:bg-purple-700 cursor-pointer flex items-center gap-2",children:[(0,t.jsx)(b,{size:18})," Import",(0,t.jsx)("input",{type:"file",accept:".json",onChange:function(e){var t;let r=null==(t=e.target.files)?void 0:t[0];if(!r)return;let n=new FileReader;n.onload=e=>{try{var t;let r=JSON.parse(null==(t=e.target)?void 0:t.result);S(r),C('Konstrukce načtena - klikněte na "Načíst" pro obnovení')}catch(e){C("Chyba při načítání souboru")}},n.readAsText(r)},className:"hidden"})]}),(0,t.jsxs)("button",{onClick:function(){z&&e.current&&(es(),C("Konstrukce načtena"))},disabled:!z,className:"px-3 py-2 rounded bg-orange-600 text-white hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[(0,t.jsx)(b,{size:18})," Načíst"]})]}),(0,t.jsxs)("div",{ref:h,id:"jxgbox",className:"w-full border-2 border-gray-300 rounded-lg bg-white jxgbox relative",style:{height:500,touchAction:"none"},children:[U&&(0,t.jsx)(m.default,{x:W.x,y:W.y,rotation:W.rotation,length:W.length,onPositionChange:(e,t,r,n)=>{G({x:e,y:t,rotation:r,length:n})},isActive:"ruler"===H,onActivate:()=>F("ruler"),onUiBusyChange:$}),E&&(0,t.jsx)(j.default,{x:I.x,y:I.y,rotation:I.rotation,size:I.size,type:"45-45-90",onPositionChange:(e,t,r,n)=>{J({x:e,y:t,rotation:r,size:n})},isActive:"triangle"===H,onActivate:()=>F("triangle"),onUiBusyChange:$}),T&&(0,t.jsx)(v.default,{x:V.x,y:V.y,rotation:V.rotation,size:V.size,onPositionChange:(e,t,r,n)=>{D({x:e,y:t,rotation:r,size:n})},isActive:"protractor"===H,onActivate:()=>F("protractor"),onUiBusyChange:$})]}),(0,t.jsx)("div",{className:"mt-4 p-3 bg-blue-50 border-l-4 border-blue-500 rounded-lg",children:(0,t.jsxs)("p",{className:"text-blue-700 text-sm",children:[(0,t.jsx)("strong",{children:"Nápověda:"})," Modrý bod = přesun • Zelený bod = otočení • Oranžový bod = změna velikosti"]})}),N&&(0,t.jsx)("div",{className:"mt-4 p-4 rounded-lg ".concat(N.includes("✅")?"bg-green-50 border-l-4 border-green-500":"bg-yellow-50 border-l-4 border-yellow-500"),children:(0,t.jsx)("p",{className:"text-gray-800",children:N})}),P.length>0&&(0,t.jsxs)("div",{className:"mt-6 bg-gray-50 rounded-lg p-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Historie konstrukcí"}),(0,t.jsx)("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:P.map((e,r)=>{var n;return(0,t.jsxs)("div",{className:"flex items-center justify-between p-2 bg-white rounded border",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("span",{className:"text-sm font-medium",children:["Konstrukce ",r+1]}),(0,t.jsx)("span",{className:"text-xs text-gray-500 ml-2",children:new Date(e.timestamp).toLocaleString("cs-CZ")})]}),(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:[(null==(n=e.objects)?void 0:n.length)||0," objektů"]})]},r)})})]})]})})})}}]);