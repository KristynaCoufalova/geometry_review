module.exports=[59068,a=>{"use strict";a.s(["default",()=>u]);var b=a.i(84787),c=a.i(40044),d=a.i(35569),e=a.i(11087),f=a.i(17957),g=a.i(14425),h=a.i(21971),i=a.i(21797),j=a.i(92919),k=a.i(64803),l=a.i(3989),m=a.i(79368),n=a.i(94825),o=a.i(17740),p=a.i(75772);function q(a,b){return Math.hypot(a.x-b.x,a.y-b.y)}function r(a){return{x:a.X(),y:a.Y()}}function s(a,b,c=.03){let d=r(b.point1),e=r(b.point2),f=e.y-d.y,g=d.x-e.x,h=-(f*d.x+g*d.y);return Math.abs(f*a.x+g*a.y+h)/Math.hypot(f,g)<c}function t(a,[b,c],d=.03){let e=[r(a.point1),r(a.point2)],f=(a,b)=>q(a,b);return f(e[0],r(b))<d&&f(e[1],r(c))<d||f(e[1],r(b))<d&&f(e[0],r(c))<d}function u(){let a=(0,c.useRef)(null),u=(0,c.useRef)(null),[v,w]=(0,c.useState)("mouse"),[x,y]=(0,c.useState)([]),[z,A]=(0,c.useState)(""),[B,C]=(0,c.useState)(null),[D,E]=(0,c.useState)([]),[F,G]=(0,c.useState)(!1),[H,I]=(0,c.useState)(!1),[J,K]=(0,c.useState)(!1),[L,M]=(0,c.useState)({x:5,y:4,rotation:0,length:6}),[N,O]=(0,c.useState)({x:7,y:4,rotation:0,size:3}),[P,Q]=(0,c.useState)({x:6,y:3,rotation:0,size:3}),[R,S]=(0,c.useState)(null),[T,U]=(0,c.useState)(!1),[V,W]=(0,c.useState)(!1),[X,Y]=(0,c.useState)(null),Z=(0,c.useRef)(v),$=(0,c.useRef)(x),_=(0,c.useRef)(T),aa=(0,c.useRef)(V),ab=(0,c.useRef)(null),ac=(0,c.useRef)({pt:null,wasFixed:!1}),ad=(0,c.useRef)(null);(0,c.useEffect)(()=>{Z.current=v},[v]),(0,c.useEffect)(()=>{$.current=x},[x]),(0,c.useEffect)(()=>{_.current=T},[T]),(0,c.useEffect)(()=>{aa.current=V},[V]);let ae=(0,c.useRef)(null);function af(a){a?.id&&E(b=>[...b,a.id])}function ag(a,b){let c=a.getUsrCoordsOfMouse(b);return{x:c[0],y:c[1]}}let ah=(0,c.useCallback)((a,b)=>{let c=(b||"").trim(),d=function(a){let b={0:"₀",1:"₁",2:"₂",3:"₃",4:"₄",5:"₅",6:"₆",7:"₇",8:"₈",9:"₉"};return a.replace(/_(\d+)/g,(a,c)=>c.split("").map(a=>b[a]??a).join(""))}(c);a.setAttribute({name:d,withLabel:!!c}),a._rawName=c},[]);function ai(a,b,c){for(let d in a.objects){let e=a.objects[d];if("point"===e.elType&&e.id!==c&&(e._rawName??"")===b)return!0}return!1}function aj(a,b){return a.getAllObjectsUnderMouse(b).find(a=>"point"===a.elType&&!a.visProp.fixed)||null}let ak=(0,c.useCallback)((a,b)=>{let c={name:"",size:3,strokeColor:"#e11d48",fillColor:"#e11d48",label:{offset:[5,10]}},{q:d}=ae.current;if(s(b,d,.15)){let e=a.create("glider",[b.x,b.y,d],c);return e._rawName="",af(e),e}let e=a.create("point",[b.x,b.y],{...c,size:2,strokeColor:"#444",fillColor:"#666"});return e._rawName="",af(e),e},[]),al=(0,c.useCallback)((a,b)=>{if(_.current||aa.current)return;let c=b.originalEvent?.target;if(c&&(c.closest(".group")||c.classList.contains("group")))return;let d=ag(a,b);switch(Z.current){case"mouse":a.getAllObjectsUnderMouse(b).find(a=>"point"===a.elType&&!a.visProp.fixed)?(b.originalEvent&&(b.originalEvent.preventDefault(),b.originalEvent.stopPropagation()),A("Bod vybrán")):A("");break;case"point":ak(a,d),A("Bod vytvořen");break;case"segment":{let c=aj(a,b);c||(c=ak(a,d)),y(b=>{let d=[...b,c];if(1===d.length)A("Klikněte na druhý bod");else if(2===d.length)return af(a.create("segment",[d[0],d[1]],{strokeColor:"#2563eb",strokeWidth:2})),A("Úsečka vytvořena"),[];return d});break}case"line":{let c=aj(a,b);c||(c=ak(a,d)),y(b=>{let d=[...b,c];if(1===d.length)A("Klikněte na druhý bod");else if(2===d.length)return af(a.create("line",[d[0],d[1]],{strokeColor:"#059669",strokeWidth:1,dash:1})),A("Přímka vytvořena"),[];return d});break}case"circle":{let c=aj(a,b);c||(c=ak(a,d)),y(b=>{let d=[...b,c];if(1===d.length)A("Klikněte na bod na kružnici");else if(2===d.length)return af(a.create("circle",[d[0],d[1]],{strokeColor:"#dc2626",strokeWidth:2})),A("Kružnice vytvořena"),[];return d});break}case"rubber":{let c=a.getAllObjectsUnderMouse(b).find(a=>!a.visProp?.fixed&&"S"!==a.name&&"C"!==a.name);c&&(a.removeObject(c),A("Objekt smazán"))}}},[ak]);return(0,c.useEffect)(()=>{ab.current=al},[al]),(0,c.useEffect)(()=>{let a=a=>{"n"!==a.key&&"N"!==a.key||_.current||W(a=>!a)};return window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)},[]),(0,c.useEffect)(()=>{if(!u.current)return;let b=d.default.JSXGraph.initBoard(u.current,{boundingbox:[-1,8,11,-1],axis:!1,showNavigation:!1,showCopyright:!1,grid:!0,pan:{enabled:!1},zoom:!1,keepaspectratio:!0});a.current=b;let c=b.create("line",[[0,7],[10,7]],{strokeColor:"#000",strokeWidth:2,name:"q",withLabel:!0,fixed:!0,label:{position:"rt",offset:[10,0]}});return ae.current={q:c,S:b.create("point",[5,5],{name:"S",size:3,strokeColor:"#000",fillColor:"#000",fixed:!0,label:{offset:[5,10]}}),C:b.create("point",[4.5,3],{name:"C",size:3,strokeColor:"#000",fillColor:"#000",fixed:!0,label:{offset:[5,-15]}})},()=>{try{d.default.JSXGraph.freeBoard(b)}catch{}a.current=null,ae.current=null}},[]),(0,c.useEffect)(()=>{let b=a.current;if(!b)return;b.off("down"),b.off("up"),b.off("dblclick");let c=a=>{if(_.current)return;if(!aa.current){ab.current&&ab.current(b,a);return}let c=b.getAllObjectsUnderMouse(a).find(a=>"point"===a.elType)||null;if(!c)return;let d=!!c.visProp.fixed;c.setAttribute({fixed:!0}),ac.current={pt:c,wasFixed:d},ad.current=ag(b,a),a.originalEvent&&(a.originalEvent.stopPropagation(),a.originalEvent.preventDefault())},d=a=>{let c=ac.current;if(!c.pt)return;let d=ag(b,a),e=ad.current||d;if(.12>=Math.hypot(d.x-e.x,d.y-e.y))return void((a,c)=>{let d=a._rawName||"",e=(window.prompt("Název bodu (např. A, B, C, A_1, A_2):",d)??"").trim();if(e&&ai(b,e,a.id)){let c=2;for(;ai(b,`${e}_${c}`,a.id);)c++;e=`${e}_${c}`}ah(a,e);let f=ac.current;a.setAttribute({fixed:f.wasFixed}),c?.originalEvent&&(c.originalEvent.stopPropagation(),c.originalEvent.preventDefault()),b.update(),e||W(!1),ac.current={pt:null,wasFixed:!1},ad.current=null})(c.pt,a);let{pt:f}=c;f.setAttribute({fixed:c.wasFixed}),ac.current={pt:null,wasFixed:!1},ad.current=null};return b.on("down",c),b.on("up",d),()=>{try{b.off("down",c),b.off("up",d)}catch{}}},[V,ah]),(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 p-6",children:(0,b.jsx)("div",{className:"max-w-6xl mx-auto",children:(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Úloha 9: Konstrukce trojúhelníku"}),(0,b.jsx)("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4 mb-4",children:(0,b.jsx)("p",{className:"text-gray-700",children:"Sestrojte rovnoramenný trojúhelník ABC. Bod C je vrchol, S je střed ramene, AB leží na přímce q."})}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-2 mb-4 p-4 bg-gray-100 rounded-lg",children:[(0,b.jsxs)("button",{onClick:()=>w("mouse"),className:`px-3 py-2 rounded flex items-center gap-2 ${"mouse"===v?"bg-gray-600 text-white":"bg-white text-gray-700 hover:bg-gray-200"}`,children:[(0,b.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,b.jsx)("path",{d:"M3 3l7.07 16.97 2.51-7.39 7.39-2.51L3 3z"}),(0,b.jsx)("path",{d:"M13 13l6 6"})]}),"Myš"]}),(0,b.jsxs)("button",{onClick:()=>w("point"),className:`px-3 py-2 rounded flex items-center gap-2 ${"point"===v?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-200"}`,children:[(0,b.jsx)(g.Circle,{size:18})," Bod"]}),(0,b.jsxs)("button",{onClick:()=>w("segment"),className:`px-3 py-2 rounded flex items-center gap-2 ${"segment"===v?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-200"}`,children:[(0,b.jsx)(h.Pencil,{size:18})," Úsečka"]}),(0,b.jsxs)("button",{onClick:()=>w("line"),className:`px-3 py-2 rounded flex items-center gap-2 ${"line"===v?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-200"}`,children:[(0,b.jsx)(h.Pencil,{size:18})," Přímka"]}),(0,b.jsxs)("button",{onClick:()=>w("circle"),className:`px-3 py-2 rounded flex items-center gap-2 ${"circle"===v?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-200"}`,children:[(0,b.jsx)(g.Circle,{size:18})," Kružnice"]}),(0,b.jsxs)("button",{onClick:()=>w("rubber"),className:`px-3 py-2 rounded flex items-center gap-2 ${"rubber"===v?"bg-red-600 text-white":"bg-white text-gray-700 hover:bg-gray-200"}`,children:[(0,b.jsx)(j.Eraser,{size:18})," Guma"]}),(0,b.jsx)("button",{onClick:()=>W(a=>!a),className:`px-3 py-2 rounded flex items-center gap-2 ${V?"bg-teal-600 text-white":"bg-white text-gray-700 hover:bg-gray-200"}`,title:"Přejmenovat bod (klikněte na bod)",children:"✎ Název bodu"}),(0,b.jsx)("div",{className:"border-l-2 border-gray-300 mx-2"}),(0,b.jsxs)("button",{onClick:function(){G(!F),F?"ruler"===R&&S(null):(S("ruler"),w("mouse"))},className:`px-3 py-2 rounded flex items-center gap-2 ${F?"bg-yellow-600 text-white":"bg-white text-gray-700 hover:bg-gray-200"}`,children:[(0,b.jsx)(k.Ruler,{size:18})," Pravítko"]}),(0,b.jsxs)("button",{onClick:function(){I(!H),H?"triangle"===R&&S(null):(S("triangle"),w("mouse"))},className:`px-3 py-2 rounded flex items-center gap-2 ${H?"bg-purple-600 text-white":"bg-white text-gray-700 hover:bg-gray-200"}`,children:[(0,b.jsx)(l.Triangle,{size:18})," Trojúhelník"]}),(0,b.jsxs)("button",{onClick:function(){K(!J),J?"protractor"===R&&S(null):(S("protractor"),w("mouse"))},className:`px-3 py-2 rounded flex items-center gap-2 ${J?"bg-orange-600 text-white":"bg-white text-gray-700 hover:bg-gray-200"}`,children:[(0,b.jsx)(m.Gauge,{size:18})," Úhloměr"]}),(0,b.jsx)("div",{className:"flex-1"}),(0,b.jsxs)("button",{onClick:function(){let b=a.current;if(!b||0===D.length)return;let c=D[D.length-1],d=c?b.objects[c]:void 0;d&&b.removeObject(d),E(a=>a.slice(0,-1)),A("")},className:"px-3 py-2 rounded bg-gray-700 text-white hover:bg-gray-800 flex items-center gap-2",children:[(0,b.jsx)(i.RotateCcw,{size:18})," Zpět"]}),(0,b.jsxs)("button",{onClick:function(){let b=a.current;if(!b)return;let c=[];for(let a in b.objects){let d=b.objects[a];d?.visProp?.fixed||"S"===d.name||"C"===d.name||"q"===d.name||c.push(d)}c.forEach(a=>b.removeObject(a)),y([]),A(""),C(null),E([])},className:"px-3 py-2 rounded bg-red-500 text-white hover:bg-red-600 flex items-center gap-2",children:[(0,b.jsx)(f.Trash2,{size:18})," Vymazat"]}),(0,b.jsxs)("button",{onClick:function(){if(!a.current)return;let b=function(){let b=a.current,{q:c,S:d,C:e}=ae.current,f=Object.values(b.objects).filter(a=>"point"===a.elType),g=a=>a?._rawName??a?.name??"",h=f.find(a=>"A"===g(a)),i=f.find(a=>"B"===g(a));if(!h||!i)return{passed:!1,message:"Označte vrcholy A a B.",score:0};let j=s(r(h),c,.03),k=s(r(i),c,.03);if(!(j&&k))return{passed:!1,message:"A i B musí ležet na přímce q.",score:1};let l=.03>Math.abs(q(r(h),r(e))-q(r(i),r(e))),m=q(r(d),r(h)),n=q(r(d),r(i)),o=q(r(d),r(e)),p=.03>Math.abs(m-o),u=.03>Math.abs(n-o);if(!(l&&(p||u)))return{passed:!1,message:"Zkontrolujte: AC = BC a S je střed ramene.",score:2};let v=Object.values(b.objects).filter(a=>"segment"===a.elType),w=v.some(a=>t(a,[h,i])),x=v.some(a=>t(a,[h,e])),y=v.some(a=>t(a,[i,e]));return w&&x&&y?{passed:!0,message:"✅ Výborně! Podmínky splněny.",score:3}:{passed:!0,message:"Správně, ale chybí narýsované strany.",score:3}}();C({validation:b,timestamp:new Date().toISOString()}),A(b.message)},className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700 flex items-center gap-2",children:[(0,b.jsx)(e.Save,{size:18})," Uložit"]})]}),(0,b.jsxs)("div",{ref:u,id:"jxgbox",className:"w-full border-2 border-gray-300 rounded-lg bg-white jxgbox relative",style:{height:500,touchAction:"none"},children:[F&&(0,b.jsx)(n.default,{x:L.x,y:L.y,rotation:L.rotation,length:L.length,onPositionChange:(a,b,c,d)=>{M({x:a,y:b,rotation:c,length:d})},isActive:"ruler"===R,onActivate:()=>{S("ruler"),w("mouse")},onUiBusyChange:U}),H&&(0,b.jsx)(o.default,{x:N.x,y:N.y,rotation:N.rotation,size:N.size,type:"45-45-90",onPositionChange:(a,b,c,d)=>{O({x:a,y:b,rotation:c,size:d})},isActive:"triangle"===R,onActivate:()=>{S("triangle"),w("mouse")},onUiBusyChange:U}),J&&(0,b.jsx)(p.default,{x:P.x,y:P.y,rotation:P.rotation,size:P.size,onPositionChange:(a,b,c,d)=>{Q({x:a,y:b,rotation:c,size:d})},isActive:"protractor"===R,onActivate:()=>{S("protractor"),w("mouse")},onUiBusyChange:U})]}),(0,b.jsx)("div",{className:"mt-4 p-3 bg-blue-50 border-l-4 border-blue-500 rounded-lg",children:(0,b.jsxs)("p",{className:"text-blue-700 text-sm",children:[(0,b.jsx)("strong",{children:"Nápověda:"})," Modrý bod = přesun • Zelený bod = otočení • Oranžový bod = změna velikosti"]})}),z&&(0,b.jsx)("div",{className:`mt-4 p-4 rounded-lg ${z.includes("✅")?"bg-green-50 border-l-4 border-green-500":"bg-yellow-50 border-l-4 border-yellow-500"}`,children:(0,b.jsx)("p",{className:"text-gray-800",children:z})})]})})})}}];

//# sourceMappingURL=Documents_geometry_review_app_components_GeometryConstructionTester_tsx_fd6458e8._.js.map